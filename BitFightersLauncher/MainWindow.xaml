<Window x:Class="BitFightersLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        Title="BitFighters Launcher" Height="700" Width="1200"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        Icon="/Resources/Logo.png"
        x:Name="BitFightersWindow"
        UseLayoutRounding="True" SnapsToDevicePixels="True"
        TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType"
        TextOptions.TextHintingMode="Fixed">

    <Window.Resources>
        <CubicEase x:Key="EntranceEase" EasingMode="EaseOut"/>

        <SolidColorBrush x:Key="PrimaryOrange" Color="#FFFF8F00"/>
        <SolidColorBrush x:Key="SecondaryOrange" Color="#FFFF9800"/>
        <SolidColorBrush x:Key="LightOrange" Color="#FFFFAB40"/>
        <SolidColorBrush x:Key="DarkOrange" Color="#FFE65100"/>

        <Storyboard x:Key="ContentEntranceAnimation">
            <DoubleAnimation Storyboard.TargetName="TopBarGrid" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.5" BeginTime="0:0:0.2"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="TopBarGrid" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             To="0" Duration="0:0:0.5" BeginTime="0:0:0.2"
                             EasingFunction="{StaticResource EntranceEase}"/>

            <DoubleAnimation Storyboard.TargetName="NavPanelContainer" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.6" BeginTime="0:0:0.3"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="NavPanelContainer" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             To="0" Duration="0:0:0.6" BeginTime="0:0:0.3"
                             EasingFunction="{StaticResource EntranceEase}"/>

            <DoubleAnimation Storyboard.TargetName="NewsPanelBorder" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.6" BeginTime="0:0:0.3"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="NewsPanelBorder" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             To="0" Duration="0:0:0.6" BeginTime="0:0:0.3"
                             EasingFunction="{StaticResource EntranceEase}"/>

            <DoubleAnimation Storyboard.TargetName="MainContentGrid" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.7" BeginTime="0:0:0.4"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="MainContentGrid" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             To="0" Duration="0:0:0.7" BeginTime="0:0:0.4"
                             EasingFunction="{StaticResource EntranceEase}"/>
        </Storyboard>

        <Storyboard x:Key="ShowNotification">
            <ThicknessAnimation Storyboard.TargetProperty="Margin" To="20,110,20,0" Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.3"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Duration="0">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="HideNotification">
            <ThicknessAnimation Storyboard.TargetProperty="Margin" To="20,90,20,0" Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.3"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" BeginTime="0:0:0.3" Duration="0">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Collapsed}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>

        <Storyboard x:Key="ExitMenuEntrance">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" 
                             From="0.8" To="1.0" Duration="0:0:0.25">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" 
                             From="0.8" To="1.0" Duration="0:0:0.25">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(TranslateTransform.Y)" 
                             From="-15" To="0" Duration="0:0:0.25">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             From="0" To="1" Duration="0:0:0.2"/>
        </Storyboard>

        <Storyboard x:Key="MenuItemHoverIn">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" 
                             To="1.05" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" 
                             To="1.05" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="MenuItemHoverOut">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" 
                             To="1.0" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" 
                             To="1.0" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="ScrollPulse" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             From="0.5" To="1.0" Duration="0:0:1.8" 
                             AutoReverse="True"/>
        </Storyboard>

        <Storyboard x:Key="UpdateAvailablePulse" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             From="0.7" To="1.0" Duration="0:0:1.0" 
                             AutoReverse="True"/>
        </Storyboard>

        <sys:Double x:Key="NewsItemHeight">90</sys:Double>
        <sys:Double x:Key="NewsBarHeight">56</sys:Double>

        <Storyboard x:Key="SimpleMenuItemHoverIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             To="0.95" Duration="0:0:0.15"/>
            <ColorAnimation Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" 
                            To="#FFFF8F00" Duration="0:0:0.15"/>
        </Storyboard>

        <Storyboard x:Key="SimpleMenuItemHoverOut">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             To="1.0" Duration="0:0:0.15"/>
            <ColorAnimation Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" 
                            To="Transparent" Duration="0:0:0.15"/>
        </Storyboard>

        <Storyboard x:Key="SimpleDangerItemHoverIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             To="0.95" Duration="0:0:0.15"/>
            <ColorAnimation Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" 
                            To="#FFD32F2F" Duration="0:0:0.15"/>
        </Storyboard>

        <Storyboard x:Key="SimpleDangerItemHoverOut">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             To="1.0" Duration="0:0:0.15"/>
            <ColorAnimation Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" 
                            To="Transparent" Duration="0:0:0.15"/>
        </Storyboard>
    </Window.Resources>

    <Border x:Name="RootBorder" CornerRadius="18" BorderBrush="#33CCCCCC" BorderThickness="1.5" ClipToBounds="True">
        <Border.Triggers>
            <EventTrigger RoutedEvent="Loaded">
                <BeginStoryboard Storyboard="{StaticResource ContentEntranceAnimation}"/>
            </EventTrigger>
        </Border.Triggers>
        <Border.Background>
            <SolidColorBrush Color="#FF1A1C20"/>
        </Border.Background>

        <Grid>
            <Rectangle Fill="#88000000" RadiusX="{Binding ElementName=RootBorder, Path=CornerRadius.TopLeft}" RadiusY="{Binding ElementName=RootBorder, Path=CornerRadius.TopLeft}" />

            <Grid x:Name="DimOverlay" Background="#80000000" Visibility="Collapsed" Panel.ZIndex="900"/>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid x:Name="TopBarGrid" Height="80" VerticalAlignment="Top" MouseLeftButtonDown="DragWindow" HorizontalAlignment="Stretch" Background="Transparent" Opacity="0">
                    <Grid.RenderTransform>
                        <TranslateTransform Y="20" />
                    </Grid.RenderTransform>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="200"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="#22FFFFFF" CornerRadius="12" 
                            HorizontalAlignment="Left" VerticalAlignment="Center" 
                            Margin="25,0,0,0" Padding="12,6"
                            UseLayoutRounding="True" SnapsToDevicePixels="True">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="2" Opacity="0.3"/>
                        </Border.Effect>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE77B;" FontFamily="Segoe MDL2 Assets" 
                                     FontSize="16" Foreground="#FFFF8F00" 
                                     VerticalAlignment="Center" Margin="0,0,8,0"
                                     UseLayoutRounding="True" SnapsToDevicePixels="True"
                                     TextOptions.TextFormattingMode="Display"
                                     TextOptions.TextRenderingMode="ClearType"
                                     TextOptions.TextHintingMode="Fixed">
                                <TextBlock.Effect>
                                    <DropShadowEffect Color="#FFFF8F00" BlurRadius="3" ShadowDepth="0" Opacity="1"/>
                                </TextBlock.Effect>
                            </TextBlock>
                            <StackPanel>
                                <TextBlock x:Name="UsernameText" Text="Felhasználó" 
                                         FontSize="13" FontWeight="Bold" 
                                         Foreground="#FFFF8F00" Margin="0,-2,0,0"
                                         UseLayoutRounding="True" SnapsToDevicePixels="True"
                                         TextOptions.TextFormattingMode="Display"
                                         TextOptions.TextRenderingMode="ClearType"
                                         TextOptions.TextHintingMode="Fixed">
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="#FFFF8F00" BlurRadius="2" ShadowDepth="0" Opacity="1.0"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                                <TextBlock Text="Bejelentkezve" 
                                         FontSize="10" Foreground="#66BB6A" FontWeight="SemiBold"
                                         Margin="0,-3,0,0"
                                         UseLayoutRounding="True" SnapsToDevicePixels="True"
                                         TextOptions.TextFormattingMode="Display"
                                         TextOptions.TextRenderingMode="ClearType"
                                         TextOptions.TextHintingMode="Fixed"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <DockPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Image Source="/Resources/Logo.png" Width="70">
                            <Image.Effect>
                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="45" ShadowDepth="0" Opacity="1.5"/>
                            </Image.Effect>
                        </Image>
                        <TextBlock Text="BITFIGHTERS" FontSize="28" FontWeight="Bold" Foreground="#FFFF8F00" TextAlignment="Center" VerticalAlignment="Center" Margin="10,0,0,0">
                            <TextBlock.Effect>
                                <DropShadowEffect ShadowDepth="0" Opacity="1.5" Color="#FFFF8F00" BlurRadius="25"/>
                            </TextBlock.Effect>
                        </TextBlock>
                    </DockPanel>

                    <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,25,0">
                        <Border x:Name="VersionDisplay" Background="#22FFFFFF" CornerRadius="12" 
                                Padding="12,6" Margin="0,0,15,0"
                                UseLayoutRounding="True" SnapsToDevicePixels="True">
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="2" Opacity="0.3"/>
                            </Border.Effect>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="VersionIcon" Text="&#xE7FC;" FontFamily="Segoe MDL2 Assets" 
                                         FontSize="16" Foreground="White" 
                                         VerticalAlignment="Center" Margin="0,0,8,0"
                                         UseLayoutRounding="True" SnapsToDevicePixels="True"
                                         TextOptions.TextFormattingMode="Display"
                                         TextOptions.TextRenderingMode="ClearType"
                                         TextOptions.TextHintingMode="Fixed">
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="White" BlurRadius="2" ShadowDepth="0" Opacity="0.8"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                                <StackPanel>
                                    <TextBlock x:Name="VersionCurrentText" Text="v1.0.0" 
                                             FontSize="13" FontWeight="Bold" 
                                             Foreground="#FFFF8F00" Margin="0,-2,0,0"
                                             UseLayoutRounding="True" SnapsToDevicePixels="True"
                                             TextOptions.TextFormattingMode="Display"
                                             TextOptions.TextRenderingMode="ClearType"
                                             TextOptions.TextHintingMode="Fixed">
                                        <TextBlock.Effect>
                                            <DropShadowEffect Color="#FFFF8F00" BlurRadius="2" ShadowDepth="0" Opacity="1.0"/>
                                        </TextBlock.Effect>
                                    </TextBlock>
                                    <TextBlock x:Name="VersionStatusText" Text="aktuális" 
                                             FontSize="10" Foreground="#E0E0E0" FontWeight="SemiBold"
                                             Margin="0,-3,0,0"
                                             UseLayoutRounding="True" SnapsToDevicePixels="True"
                                             TextOptions.TextFormattingMode="Display"
                                             TextOptions.TextRenderingMode="ClearType"
                                             TextOptions.TextHintingMode="Fixed"/>
                                </StackPanel>
                                <Border x:Name="UpdateIndicator" Width="8" Height="8" 
                                        Background="#FF4CAF50" CornerRadius="4" 
                                        Margin="8,0,0,0" VerticalAlignment="Center"
                                        Visibility="Collapsed">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF4CAF50" BlurRadius="6" ShadowDepth="0" Opacity="1"/>
                                    </Border.Effect>
                                </Border>
                            </StackPanel>
                        </Border>

                        <Button x:Name="ExitBtn" Content="&#xE711;" FontFamily="Segoe MDL2 Assets" FontSize="28" 
                                Click="ExitButton_Click" Height="28" Width="28">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="#FFFF8F00"/>
                                    <Setter Property="Cursor" Value="Hand"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <ContentPresenter x:Name="contentPresenter" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                    <ContentPresenter.Effect>
                                                        <DropShadowEffect x:Name="glowEffect" Color="#FFFF8F00" BlurRadius="0" ShadowDepth="0" Opacity="0"/>
                                                    </ContentPresenter.Effect>
                                                </ContentPresenter>
                                                <ControlTemplate.Triggers>
                                                    <EventTrigger RoutedEvent="MouseEnter">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <ColorAnimation Storyboard.TargetProperty="(Button.Foreground).(SolidColorBrush.Color)" To="Red" Duration="0:0:0.2"/>
                                                                <DoubleAnimation Storyboard.TargetName="glowEffect" Storyboard.TargetProperty="BlurRadius" To="20" Duration="0:0:0.2"/>
                                                                <DoubleAnimation Storyboard.TargetName="glowEffect" Storyboard.TargetProperty="Opacity" To="1.5" Duration="0:0:0.2"/>
                                                                <ColorAnimation Storyboard.TargetName="glowEffect" Storyboard.TargetProperty="Color" To="Red" Duration="0:0:0.2"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <EventTrigger RoutedEvent="MouseLeave">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <ColorAnimation Storyboard.TargetProperty="(Button.Foreground).(SolidColorBrush.Color)" To="#FFFF8F00" Duration="0:0:0.3"/>
                                                                <DoubleAnimation Storyboard.TargetName="glowEffect" Storyboard.TargetProperty="BlurRadius" To="0" Duration="0:0:0.3"/>
                                                                <DoubleAnimation Storyboard.TargetName="glowEffect" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.3"/>
                                                                <ColorAnimation Storyboard.TargetName="glowEffect" Storyboard.TargetProperty="Color" To="#FFFF8F00" Duration="0:0:0.3"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                            <Button.ContextMenu>
                                <ContextMenu x:Name="ExitContextMenu" HasDropShadow="True" Width="320" Opened="ExitContextMenu_Opened" Closed="ExitContextMenu_Closed">
                                    <ContextMenu.Template>
                                        <ControlTemplate TargetType="ContextMenu">
                                            <Border Background="#FF1A1C20" CornerRadius="12" BorderBrush="#FFFF8F00" BorderThickness="2" MinWidth="320" Panel.ZIndex="1000">
                                                <Border.RenderTransform>
                                                    <TransformGroup>
                                                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                                                        <SkewTransform AngleX="0" AngleY="0"/>
                                                        <RotateTransform Angle="0"/>
                                                        <TranslateTransform X="0" Y="0"/>
                                                    </TransformGroup>
                                                </Border.RenderTransform>
                                                <Border.Effect>
                                                    <DropShadowEffect Color="#000000" BlurRadius="20" ShadowDepth="0" Opacity="0.7"/>
                                                </Border.Effect>
                                                <Border.Triggers>
                                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                        <BeginStoryboard Storyboard="{StaticResource ExitMenuEntrance}"/>
                                                    </EventTrigger>
                                                </Border.Triggers>
                                                <StackPanel>
                                                    <Border Background="#331A1C20" Padding="16,12" CornerRadius="12,12,0,0">
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                            <TextBlock Text="&#xE7E8;" FontFamily="Segoe MDL2 Assets" Foreground="#FFFF8F00" FontSize="14" Margin="0,3,8,0"/>
                                                            <TextBlock Text="Kilépés" Foreground="#FFFF8F00" FontWeight="Bold" FontSize="14"/>
                                                        </StackPanel>
                                                    </Border>
                                                    <ItemsPresenter Margin="8"/>
                                                </StackPanel>
                                            </Border>
                                        </ControlTemplate>
                                    </ContextMenu.Template>
                                    <ContextMenu.Resources>
                                        <Style x:Key="BaseMenuItemStyle" TargetType="MenuItem">
                                            <Setter Property="Padding" Value="16,14"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="MenuItem">
                                                        <Border x:Name="bd" Background="#111A1C20" CornerRadius="8" Padding="16,14" Margin="8,4" MinWidth="280"
                                                                BorderBrush="Transparent" BorderThickness="2">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock x:Name="iconText" Text="{TemplateBinding Tag}" FontFamily="Segoe MDL2 Assets" 
                                                                           Foreground="#FFFF8F00" FontSize="18" VerticalAlignment="Center" Margin="0,0,16,0"/>
                                                                <StackPanel Grid.Column="1">
                                                                    <TextBlock Text="{TemplateBinding Header}" Foreground="White" FontWeight="Bold" FontSize="16"/>
                                                                    <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ToolTip}" 
                                                                               Foreground="#B3FFFFFF" FontSize="12" Margin="0,2,0,0"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="bd" Property="Background" Value="#22FF8F00"/>
                                                                <Setter TargetName="bd" Property="BorderBrush" Value="#FFFF8F00"/>
                                                                <Setter TargetName="iconText" Property="Foreground" Value="#FFFFFF"/>
                                                                <Trigger.EnterActions>
                                                                    <BeginStoryboard>
                                                                        <Storyboard>
                                                                            <DoubleAnimation Storyboard.TargetName="bd" 
                                                                                             Storyboard.TargetProperty="Opacity" 
                                                                                             To="0.95" Duration="0:0:0.2"/>
                                                                        </Storyboard>
                                                                    </BeginStoryboard>
                                                                </Trigger.EnterActions>
                                                                <Trigger.ExitActions>
                                                                    <BeginStoryboard>
                                                                        <Storyboard>
                                                                            <DoubleAnimation Storyboard.TargetName="bd" 
                                                                                             Storyboard.TargetProperty="Opacity" 
                                                                                             To="1.0" Duration="0:0:0.2"/>
                                                                        </Storyboard>
                                                                    </BeginStoryboard>
                                                                </Trigger.ExitActions>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="bd" Property="Background" Value="#44FF8F00"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>

                                        <Style x:Key="DangerMenuItemStyle" BasedOn="{StaticResource BaseMenuItemStyle}" TargetType="MenuItem">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="MenuItem">
                                                        <Border x:Name="bd" Background="#19D32F2F" CornerRadius="8" Padding="16,14" Margin="8,4" MinWidth="280"
                                                                BorderBrush="Transparent" BorderThickness="2">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock x:Name="iconText" Text="{TemplateBinding Tag}" FontFamily="Segoe MDL2 Assets" 
                                                                           Foreground="#FFD32F2F" FontSize="18" VerticalAlignment="Center" Margin="0,0,16,0"/>
                                                                <StackPanel Grid.Column="1">
                                                                    <TextBlock Text="{TemplateBinding Header}" Foreground="White" FontWeight="Bold" FontSize="16"/>
                                                                    <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ToolTip}" 
                                                                               Foreground="#E6FFFFFF" FontSize="12" Margin="0,2,0,0"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="bd" Property="Background" Value="#22D32F2F"/>
                                                                <Setter TargetName="bd" Property="BorderBrush" Value="#FFD32F2F"/>
                                                                <Setter TargetName="iconText" Property="Foreground" Value="#FFFFFF"/>
                                                                <Trigger.EnterActions>
                                                                    <BeginStoryboard>
                                                                        <Storyboard>
                                                                            <DoubleAnimation Storyboard.TargetName="bd" 
                                                                                             Storyboard.TargetProperty="Opacity" 
                                                                                             To="0.95" Duration="0:0:0.2"/>
                                                                        </Storyboard>
                                                                    </BeginStoryboard>
                                                                </Trigger.EnterActions>
                                                                <Trigger.ExitActions>
                                                                    <BeginStoryboard>
                                                                        <Storyboard>
                                                                            <DoubleAnimation Storyboard.TargetName="bd" 
                                                                                             Storyboard.TargetProperty="Opacity" 
                                                                                             To="1.0" Duration="0:0:0.2"/>
                                                                        </Storyboard>
                                                                    </BeginStoryboard>
                                                                </Trigger.ExitActions>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="bd" Property="Background" Value="#44D32F2F"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ContextMenu.Resources>

                                    <MenuItem Style="{StaticResource BaseMenuItemStyle}"
                                              Header="Kilépés"
                                              ToolTip="Program bezárása bejelentkezve maradással"
                                              Tag="&#xE711;" Click="ExitOnlyMenuItem_Click"/>

                                    <MenuItem Style="{StaticResource DangerMenuItemStyle}"
                                              Header="Kijelentkezés"
                                              ToolTip="Adatok törlése és visszatérés a bejelentkezési képernyőhöz"
                                              Tag="&#xE7E8;" Click="LogoutExitMenuItem_Click"/>
                                </ContextMenu>
                            </Button.ContextMenu>
                        </Button>
                    </StackPanel>
                </Grid>

                <Grid Grid.Row="1" Margin="0,0,0,0" Width="1196">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="420"/>
                    </Grid.ColumnDefinitions>

                    <Rectangle Height="2" VerticalAlignment="Top" Fill="#FFFF8F00" Opacity="0.8" Grid.ColumnSpan="3"/>

                    <Border x:Name="NavPanelContainer" Grid.Column="0" CornerRadius="0,0,0,17" Margin="0,2,0,0" Background="Transparent" Opacity="0">
                        <Border.RenderTransform>
                            <TranslateTransform Y="20" />
                        </Border.RenderTransform>
                        <Grid>
                            <StackPanel x:Name="NavButtonsPanel" VerticalAlignment="Stretch" Margin="0,2,0,0">
                                <StackPanel.Resources>
                                    <Style x:Key="NavButtonStyle" TargetType="Button">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="#FFFF8F00"/>
                                        <Setter Property="FontSize" Value="32"/>
                                        <Setter Property="Margin" Value="0,32,0,30"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Height" Value="62"/>
                                        <Setter Property="Width" Value="37"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <ContentPresenter x:Name="contentPresenter" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                        <ContentPresenter.Effect>
                                                            <DropShadowEffect Color="#FFFF8F00" BlurRadius="0" ShadowDepth="0" Opacity="0"/>
                                                        </ContentPresenter.Effect>
                                                    </ContentPresenter>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="Tag" Value="Active">
                                                            <Setter Property="Foreground" Value="White"/>
                                                            <Setter TargetName="contentPresenter" Property="Effect">
                                                                <Setter.Value>
                                                                    <DropShadowEffect Color="White" BlurRadius="15" ShadowDepth="0" Opacity="1"/>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Trigger>

                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="White"/>
                                                            <Setter TargetName="contentPresenter" Property="Effect">
                                                                <Setter.Value>
                                                                    <DropShadowEffect Color="White" BlurRadius="25" ShadowDepth="0" Opacity="1.5"/>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </StackPanel.Resources>
                                <Button x:Name="HomeNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE80F;" FontFamily="Segoe MDL2 Assets" ToolTip="Home" Click="HomeButton_Click"/>
                                <Button x:Name="SettingsNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE713;" FontFamily="Segoe MDL2 Assets" ToolTip="Settings"/>
                                <Button x:Name="StarNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE734;" FontFamily="Segoe MDL2 Assets" ToolTip="Star" Click="StarButton_Click"/>
                                <Button x:Name="ProfileNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE77B;" FontFamily="Segoe MDL2 Assets" ToolTip="Profile" Click="ProfileButton_Click"/>
                                <Button x:Name="DownloadNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE896;" FontFamily="Segoe MDL2 Assets" ToolTip="Download"/>
                            </StackPanel>

                            <Rectangle x:Name="NavIndicator" Width="6" Fill="#FFFF8F00" RadiusX="3" RadiusY="3" 
                                       HorizontalAlignment="Right" Margin="0,28,0,509">
                                <Rectangle.RenderTransform>
                                    <TranslateTransform x:Name="NavIndicatorTransform" Y="0"/>
                                </Rectangle.RenderTransform>
                                <Rectangle.Effect>
                                    <DropShadowEffect Color="#FFFF8F00" BlurRadius="15" ShadowDepth="0" Opacity="1.5"/>
                                </Rectangle.Effect>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <Grid x:Name="MainContentGrid" Grid.Column="1" Opacity="0">
                        <Grid.RenderTransform>
                            <TranslateTransform Y="20" />
                        </Grid.RenderTransform>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Button x:Name="ActionButton" Cursor="Hand" Click="HandleActionButton_Click" HorizontalAlignment="Left" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5" Width="310" Height="310" Margin="324,0,0,0">
                            <Button.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform/>
                                    <SkewTransform AngleX="0.095"/>
                                    <RotateTransform/>
                                    <TranslateTransform X="0.248"/>
                                </TransformGroup>
                            </Button.RenderTransform>
                            <Button.Style>
                                <Style TargetType="{x:Type Button}">
                                    <Setter Property="Background" Value="Transparent" />
                                    <Setter Property="BorderBrush" Value="Transparent" />
                                    <Setter Property="Foreground" Value="White" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type Button}">
                                                <Grid>
                                                    <Border x:Name="OuterBorder" CornerRadius="45" BorderThickness="4" BorderBrush="#FFFF8F00" Margin="-6" Background="#00000000">
                                                        <Border.Effect>
                                                            <DropShadowEffect x:Name="OuterGlow" Color="#FFFF8F00" BlurRadius="15" ShadowDepth="0" Opacity="1.2" RenderingBias="Quality" />
                                                        </Border.Effect>
                                                    </Border>
                                                    <Border x:Name="InnerBorder" Width="300" Height="300" CornerRadius="37" BorderThickness="4" BorderBrush="#FFFF8F00" Padding="32" Background="#00000000">
                                                        <Border.Effect>
                                                            <DropShadowEffect x:Name="InnerGlow" Color="#FFFF8F00" BlurRadius="15" ShadowDepth="0" Opacity="1.5" />
                                                        </Border.Effect>
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <EventTrigger RoutedEvent="UIElement.MouseEnter">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <ColorAnimation Storyboard.TargetName="OuterBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#FFFF8F00" Duration="0:0:0.2"/>
                                                                <ColorAnimation Storyboard.TargetName="InnerBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#FFFF8F00" Duration="0:0:0.2"/>
                                                                <DoubleAnimation Storyboard.TargetName="InnerGlow" Storyboard.TargetProperty="BlurRadius" To="45" Duration="0:0:0.2"/>
                                                                <DoubleAnimation Storyboard.TargetName="OuterGlow" Storyboard.TargetProperty="BlurRadius" To="35" Duration="0:0:0.2"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <EventTrigger RoutedEvent="UIElement.MouseLeave">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <ColorAnimation Storyboard.TargetName="OuterBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#00000000" Duration="0:0:0.3"/>
                                                                <ColorAnimation Storyboard.TargetName="InnerBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#00000000" Duration="0:0:0.3"/>
                                                                <DoubleAnimation Storyboard.TargetName="InnerGlow" Storyboard.TargetProperty="BlurRadius" To="15" Duration="0:0:0.3"/>
                                                                <DoubleAnimation Storyboard.TargetName="OuterGlow" Storyboard.TargetProperty="BlurRadius" To="15" Duration="0:0:0.3"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="InnerBorder" Property="Background" Value="#CCFF8F00"/>
                                                    </Trigger>
                                                    <Trigger Property="IsEnabled" Value="False">
                                                        <Setter TargetName="InnerBorder" Property="Opacity" Value="0.5"/>
                                                        <Setter TargetName="OuterBorder" Property="Opacity" Value="0.5"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                            <Viewbox>
                                <TextBlock x:Name="ButtonText" Text="LETOLTES" FontSize="48" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="#FFFF8F00" BlurRadius="15" ShadowDepth="0" Opacity="1.5" />
                                    </TextBlock.Effect>
                                </TextBlock>
                            </Viewbox>
                        </Button>
                    </Grid>

                    <Grid x:Name="ProfileViewGrid" Grid.Column="1" Grid.ColumnSpan="2" Visibility="Collapsed" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                        <StackPanel Width="600" HorizontalAlignment="Center">
                            <Border Background="#22FFFFFF" CornerRadius="20" Padding="30" Margin="0,0,0,30">
                                <Border.Effect>
                                    <DropShadowEffect Color="#FFFF8F00" BlurRadius="20" ShadowDepth="0" Opacity="0.4"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0" Width="120" Height="120" CornerRadius="60" 
                                            Background="#FFFF8F00" Margin="0,0,30,0">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#FFFF8F00" BlurRadius="25" ShadowDepth="0" Opacity="1"/>
                                        </Border.Effect>
                                        <TextBlock Text="👤" FontSize="60" HorizontalAlignment="Center" 
                                                   VerticalAlignment="Center" Foreground="#FF1A1C20">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="10" ShadowDepth="0" Opacity="1.2"/>
                                            </TextBlock.Effect>
                                        </TextBlock>
                                    </Border>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock x:Name="ProfileUsernameText" Text="Felhasználó" 
                                                   FontSize="32" FontWeight="Bold" Foreground="#FFFF8F00" 
                                                   Margin="0,0,0,15">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="10" ShadowDepth="0" Opacity="1.2"/>
                                            </TextBlock.Effect>
                                        </TextBlock>

                                        <TextBlock x:Name="ProfileRankText" Text="🔰 Kezdő" 
                                                   FontSize="18" FontWeight="SemiBold" Foreground="White">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="6" ShadowDepth="0" Opacity="0.8"/>
                                            </TextBlock.Effect>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Background="#22FFFFFF" CornerRadius="15" Padding="25">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="🏆" FontSize="40" HorizontalAlignment="Center" Margin="0,0,0,10">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="8" ShadowDepth="0" Opacity="1"/>
                                            </TextBlock.Effect>
                                        </TextBlock>
                                        <TextBlock Text="Legmagasabb pontszám" FontSize="16" FontWeight="SemiBold" 
                                                   Foreground="#FFFF8F00" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                        <TextBlock x:Name="ProfileHighestScoreText" Text="0" FontSize="28" FontWeight="Bold" 
                                                   Foreground="White" HorizontalAlignment="Center">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="6" ShadowDepth="0" Opacity="1"/>
                                            </TextBlock.Effect>
                                        </TextBlock>
                                    </StackPanel>
                                </Border>

                                <Border Grid.Column="2" Background="#22FFFFFF" CornerRadius="15" Padding="25">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="🏅" FontSize="40" HorizontalAlignment="Center" Margin="0,0,0,10">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="8" ShadowDepth="0" Opacity="1"/>
                                            </TextBlock.Effect>
                                        </TextBlock>
                                        <TextBlock Text="Rangsor helyezés" FontSize="16" FontWeight="SemiBold" 
                                                   Foreground="#FFFF8F00" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                        <TextBlock x:Name="ProfileUserRankText" Text="N/A" FontSize="28" FontWeight="Bold" 
                                                   Foreground="White" HorizontalAlignment="Center">
                                            <TextBlock.Effect>
                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="6" ShadowDepth="0" Opacity="1"/>
                                            </TextBlock.Effect>
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Grid>

                    <Grid x:Name="LeaderboardViewGrid" Grid.Column="1" Grid.ColumnSpan="2" Visibility="Collapsed" Margin="40,25,20,0">
                        <StackPanel>
                            <TextBlock Text="TOP 15 JÁTÉKOS" Foreground="White" FontSize="22" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <Rectangle Height="1" Fill="#A7FF8F00" Margin="0,10,0,20" HorizontalAlignment="Center" Width="350"/>

                            <Border BorderBrush="#33CCCCCC" BorderThickness="0,0,0,1" Margin="0,0,40,10" Padding="12,0,12,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Helyezés" Foreground="#FFFF8F00" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" Text="Felhasználónév" Foreground="#FFFF8F00" FontWeight="Bold" FontSize="16"/>
                                    <TextBlock Grid.Column="2" Text="Pontszám" Foreground="#FFFF8F00" FontWeight="Bold" FontSize="16" HorizontalAlignment="Right"/>
                                </Grid>
                            </Border>

                            <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500">
                                <ItemsControl x:Name="LeaderboardItemsControl">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#09FFFFFF" CornerRadius="8" Margin="0,0,40,8" Padding="12">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="80"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="150"/>
                                                    </Grid.ColumnDefinitions>

                                                    <TextBlock Grid.Column="0" Text="{Binding rank, StringFormat='#{0}'}" Foreground="White" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="1" Text="{Binding username}" Foreground="White" FontSize="16" VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="2" Text="{Binding highest_score}" Foreground="#FFFF8F00" FontSize="18" FontWeight="SemiBold" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </StackPanel>
                    </Grid>

                    <Border x:Name="NewsPanelBorder" Grid.Column="2" CornerRadius="12" Margin="0,25,0,155" Opacity="0">
                        <Border.RenderTransform>
                            <TranslateTransform Y="20" />
                        </Border.RenderTransform>
                        <StackPanel HorizontalAlignment="Center" Margin="15,0,15,0">
                            <TextBlock Text="HÍREK ÉS FRISSÍTÉSEK" Foreground="White" FontSize="22" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <Rectangle Height="1" Fill="#A7FF8F00" Margin="0,10,0,20" HorizontalAlignment="Center" Width="295"/>
                            <Grid Height="370">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <ScrollViewer x:Name="NewsScrollViewer" Grid.Row="1" VerticalScrollBarVisibility="Hidden" PreviewMouseWheel="NewsScrollViewer_PreviewMouseWheel" ScrollChanged="NewsScrollViewer_ScrollChanged">
                                    <ItemsControl x:Name="NewsItemsControl" HorizontalAlignment="Center">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#15FFFF99" CornerRadius="8" Margin="0,0,0,15" Padding="8" Height="{StaticResource NewsItemHeight}"
                                                        UseLayoutRounding="True" SnapsToDevicePixels="True">
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#FFFF99" BlurRadius="4" ShadowDepth="0" Opacity="0.2"/>
                                                    </Border.Effect>
                                                    <Grid VerticalAlignment="Center">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Rectangle Grid.Column="0" Width="3" Height="{StaticResource NewsBarHeight}" Fill="#FFFF8F00" RadiusX="2" RadiusY="2" Margin="0,0,12,0" VerticalAlignment="Center">
                                                            <Rectangle.Effect>
                                                                <DropShadowEffect Color="#FFFF8F00" BlurRadius="25" ShadowDepth="0" Opacity="1.2"/>
                                                            </Rectangle.Effect>
                                                        </Rectangle>
                                                        <Grid Grid.Column="1" Width="279" Height="{StaticResource NewsBarHeight}">
                                                            <TextBlock Text="{Binding Title}" Foreground="White" FontWeight="Bold" FontSize="15" 
                                                                       TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Top"
                                                                       Margin="0,4,60,0"
                                                                       UseLayoutRounding="True" SnapsToDevicePixels="True"
                                                                       TextOptions.TextFormattingMode="Display"
                                                                       TextOptions.TextRenderingMode="ClearType"
                                                                       TextOptions.TextHintingMode="Fixed"/>
                                                            <TextBlock Text="{Binding FormattedDate}" Foreground="#FFFF8F00" FontSize="12" FontWeight="Bold" 
                                                                       HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                                                                       Margin="0,0,8,-10"
                                                                       UseLayoutRounding="True" SnapsToDevicePixels="True"
                                                                       TextOptions.TextFormattingMode="Display"
                                                                       TextOptions.TextRenderingMode="ClearType"
                                                                       TextOptions.TextHintingMode="Fixed">
                                                                <TextBlock.RenderTransform>
                                                                    <TranslateTransform X="7" Y="0"/>
                                                                </TextBlock.RenderTransform>
                                                                <TextBlock.Effect>
                                                                    <DropShadowEffect Color="#FFFF8F00" BlurRadius="2" ShadowDepth="0" Opacity="1.2"/>
                                                                </TextBlock.Effect>
                                                            </TextBlock>
                                                        </Grid>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>

                                <Grid x:Name="TopScrollIndicator" Grid.Row="0" Height="25" Opacity="0" IsHitTestVisible="False">
                                    <TextBlock Text="▲" FontSize="16" FontWeight="Bold" Foreground="#FFFF8F00" 
                                               HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock.Effect>
                                            <DropShadowEffect Color="#FFFF8F00" BlurRadius="10" ShadowDepth="0" Opacity="1.2"/>
                                        </TextBlock.Effect>
                                    </TextBlock>
                                </Grid>

                                <Grid x:Name="BottomScrollIndicator" Grid.Row="2" Height="25" Opacity="0" IsHitTestVisible="False">
                                    <TextBlock Text="▼" FontSize="16" FontWeight="Bold" Foreground="#FFFF8F00" 
                                               HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock.Effect>
                                            <DropShadowEffect Color="#FFFF8F00" BlurRadius="10" ShadowDepth="0" Opacity="1.2"/>
                                        </TextBlock.Effect>
                                    </TextBlock>
                                </Grid>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>

                <Border x:Name="NotificationBorder" Grid.Row="0" Grid.RowSpan="2" Height="50" Opacity="0" Background="#FF2c2f34" BorderBrush="#FFFF8F00" BorderThickness="1.5" CornerRadius="10" Margin="25,90,20,0" HorizontalAlignment="Center" VerticalAlignment="Top" Visibility="Collapsed">
                    <TextBlock x:Name="NotificationText" Foreground="White" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20,0"/>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>