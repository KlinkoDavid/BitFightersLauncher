 <Window x:Class="BitFightersLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        Title="BitFighters Launcher" Height="700" Width="1200"
        WindowStyle="None" ResizeMode="NoResize" WindowState="Normal" AllowsTransparency="True" Background="Transparent"
        Icon="/Resources/Logo.png"
        x:Name="BitFightersWindow"
        WindowStartupLocation="CenterScreen"
        UseLayoutRounding="True" SnapsToDevicePixels="True"
        RenderOptions.BitmapScalingMode="HighQuality"
        TextOptions.TextRenderingMode="ClearType"
        CacheMode="BitmapCache">

    <Window.Resources>
        <CubicEase x:Key="EntranceEase" EasingMode="EaseOut"/>

        
        <FontFamily x:Key="CustomFont">pack://application:,,,/Fonts/Energize-Bold-Italic.otf#Energize</FontFamily>
        <FontFamily x:Key="CustomFont2">pack://application:,,,/Fonts/SourGummy_Expanded-Bold.ttf#Sour Gummy Expanded</FontFamily>
        <FontFamily x:Key="CustomFont3">pack://application:,,,/Fonts/RussoOne-Regular.ttf#Russo One</FontFamily>
        <FontFamily x:Key="Number">pack://application:,,,/Fonts/RussoOne-Regular.ttf#Russo One</FontFamily>
        
        <SolidColorBrush x:Key="PrimaryOrange" Color="#FFFFA726"/>
        <SolidColorBrush x:Key="SecondaryOrange" Color="#FFFF9800"/>
        <SolidColorBrush x:Key="LightOrange" Color="#FFFFAB40"/>
        <SolidColorBrush x:Key="DarkOrange" Color="#FFE65100"/>
        
        <!-- Shared orange gradient used for icons (matches play button) -->
        <LinearGradientBrush x:Key="OrangeGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FFE65100" Offset="0"/>
            <GradientStop Color="#FFFF9800" Offset="0.5"/>
            <GradientStop Color="#FFFFA726" Offset="1"/>
        </LinearGradientBrush>

        <!-- Még gyorsabb és egyszerűbb animációk -->
        <Storyboard x:Key="ContentEntranceAnimation">
            <DoubleAnimation Storyboard.TargetName="WindowControlsPanel" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.2" BeginTime="0:0:0.05"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="NewsPanelBorder" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.2" BeginTime="0:0:0.15"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="MainContentGrid" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.2" BeginTime="0:0:0.2"
                             EasingFunction="{StaticResource EntranceEase}"/>
        </Storyboard>

        <!-- Minimál notification animációk -->
        <!-- Modernized notification animations: translate + fade -->
        <Storyboard x:Key="ShowNotification">
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Duration="0">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}"/>
            </ObjectAnimationUsingKeyFrames>
            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.18" />
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="-12" To="0" Duration="0:0:0.22">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                             From="0.98" To="1" Duration="0:0:0.22" />
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                             From="0.98" To="1" Duration="0:0:0.22" />
        </Storyboard>

        <Storyboard x:Key="HideNotification">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.16" />
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             To="-12" Duration="0:0:0.16" />
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" BeginTime="0:0:0.16" Duration="0">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Collapsed}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Minimál exit menu animáció -->
        <Storyboard x:Key="ExitMenuEntrance">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             From="0" To="1" Duration="0:0:0.1"/>
        </Storyboard>


        <sys:Double x:Key="NewsItemHeight">90</sys:Double>
        <sys:Double x:Key="NewsBarHeight">56</sys:Double>

        <Style x:Key="ScrollThumbStyle" TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Border CornerRadius="4" Background="{TemplateBinding Background}" BorderThickness="0"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernScrollBarStyle" TargetType="{x:Type ScrollBar}">
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="Foreground" Value="#66FFFFFF"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollBar}">
                        <Grid x:Name="GridRoot" Background="{TemplateBinding Background}">
                            <Track x:Name="PART_Track" IsDirectionReversed="true" Focusable="false">
                                <Track.Thumb>
                                    <Thumb x:Name="Thumb" Background="{TemplateBinding Foreground}" Style="{StaticResource ScrollThumbStyle}"/>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton x:Name="PageInc" Command="ScrollBar.PageDownCommand" Opacity="0" Focusable="false"/>
                                </Track.IncreaseRepeatButton>
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton x:Name="PageDec" Command="ScrollBar.PageUpCommand" Opacity="0" Focusable="false"/>
                                </Track.DecreaseRepeatButton>
                            </Track>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Orientation" Value="Vertical">
                                <Setter Property="Width" Value="10"/>
                                <Setter TargetName="GridRoot" Property="Width" Value="8"/>
                                <Setter TargetName="Thumb" Property="Width" Value="6"/>
                                <Setter TargetName="Thumb" Property="Margin" Value="0,0,2,0"/>
                            </Trigger>
                            <Trigger Property="Orientation" Value="Horizontal">
                                <Setter Property="Height" Value="10"/>
                                <Setter TargetName="GridRoot" Property="Height" Value="8"/>
                                <Setter TargetName="Thumb" Property="Height" Value="6"/>
                                <Setter TargetName="Thumb" Property="Margin" Value="0,0,0,2"/>
                                <Setter TargetName="PageInc" Property="Command" Value="ScrollBar.PageRightCommand"/>
                                <Setter TargetName="PageDec" Property="Command" Value="ScrollBar.PageLeftCommand"/>
                                <Setter TargetName="PART_Track" Property="IsDirectionReversed" Value="false"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="true"/>
                                    <Condition Property="Orientation" Value="Vertical"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Thumb" Property="Background" Value="#AAFFFFFF"/>
                                <Setter TargetName="Thumb" Property="Width" Value="8"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="true"/>
                                    <Condition Property="Orientation" Value="Horizontal"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Thumb" Property="Background" Value="#AAFFFFFF"/>
                                <Setter TargetName="Thumb" Property="Height" Value="8"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernScrollViewerStyle" TargetType="{x:Type ScrollViewer}">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ScrollContentPresenter Grid.Column="0"/>
                            <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="1" Value="{TemplateBinding VerticalOffset}" Maximum="{TemplateBinding ScrollableHeight}" ViewportSize="{TemplateBinding ViewportHeight}" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Style="{StaticResource ModernScrollBarStyle}"/>
                            <ScrollBar x:Name="PART_HorizontalScrollBar" Orientation="Horizontal" Grid.Row="1" Grid.Column="0" Value="{TemplateBinding HorizontalOffset}" Maximum="{TemplateBinding ScrollableWidth}" ViewportSize="{TemplateBinding ViewportWidth}" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Style="{StaticResource ModernScrollBarStyle}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="BaseMenuItemStyle" TargetType="MenuItem">
            <Setter Property="Padding" Value="16,14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="MenuItem">
                        <Border x:Name="bd" Background="Transparent" CornerRadius="8" Padding="16,14" Margin="6,3" MinWidth="280"
                                BorderBrush="Transparent" BorderThickness="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border x:Name="iconBorder" Background="#4D555A" Width="36" Height="36" CornerRadius="6" 
                                        Margin="0,0,14,0" VerticalAlignment="Center">
                                    <Viewbox Width="18" Height="18" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Path x:Name="iconPath" Data="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}" Stretch="Uniform"
                                              Fill="#CCCCCC"/>
                                    </Viewbox>
                                </Border>
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{TemplateBinding Header}" Foreground="#FFFFFF" FontWeight="SemiBold" FontSize="16" FontFamily="{StaticResource CustomFont3}"/>
                                    <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ToolTip}"
                                               Foreground="#A0A0A0" FontSize="12" Margin="0,2,0,0" TextWrapping="Wrap" FontFamily="{StaticResource CustomFont3}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#2A3A3F45"/>
                                <Setter TargetName="iconBorder" Property="Background" Value="#5D656A"/>
                                <Setter TargetName="iconPath" Property="Fill" Value="#FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DangerMenuItemStyle" BasedOn="{StaticResource BaseMenuItemStyle}" TargetType="MenuItem">
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="MenuItem">
                        <Border x:Name="bd" Background="#19D32F2F" CornerRadius="8" Padding="12,14" Margin="8,4" MinWidth="260"
                                BorderBrush="Transparent" BorderThickness="2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border x:Name="iconBorderDanger" Background="#331B1B" Width="42" Height="42" CornerRadius="6" 
                                        Margin="0,0,14,0" VerticalAlignment="Center" ClipToBounds="True">
                                    <Viewbox Width="22" Height="22" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform">
                                        <Path x:Name="iconPathDanger" Data="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}" Stretch="Uniform"
                                              Fill="#FFD32F2F"/>
                                    </Viewbox>
                                </Border>
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="{TemplateBinding Header}" Foreground="White" FontWeight="Bold" FontSize="16" FontFamily="{StaticResource CustomFont3}"/>
                                    <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ToolTip}" 
                                               Foreground="#E6FFFFFF" FontSize="12" Margin="0,2,0,0" FontFamily="{StaticResource CustomFont3}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#22D32F2F"/>
                                <Setter TargetName="bd" Property="BorderBrush" Value="#FFD32F2F"/>
                                <Setter TargetName="iconPathDanger" Property="Fill" Value="#FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- Properly clipped border with correct background -->
    <Border x:Name="RootBorder" CornerRadius="25" 
            Background="#FF1A1C20" ClipToBounds="True" MouseLeftButtonDown="DragWindow" PreviewMouseWheel="RootBorder_PreviewMouseWheel">
        <Border.Triggers>
            <EventTrigger RoutedEvent="Loaded">
                <BeginStoryboard Storyboard="{StaticResource ContentEntranceAnimation}"/>
            </EventTrigger>
        </Border.Triggers>

        <Grid>
            <!-- Background image with proper clipping -->
            <Border CornerRadius="23" ClipToBounds="True">
                <Border.Background>
                    <ImageBrush ImageSource="/Resources/Background.png" Stretch="UniformToFill"/>
                </Border.Background>
            </Border>
            
            <!-- Egyszerű sötétítő réteg - Darker left side like Valorant -->
            <Border CornerRadius="23">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#F0000000" Offset="0"/>
                        <GradientStop Color="#E6000000" Offset="0.2"/>
                        <GradientStop Color="#D9000000" Offset="0.35"/>
                        <GradientStop Color="#99000000" Offset="0.5"/>
                        <GradientStop Color="#4D000000" Offset="0.7"/>
                        <GradientStop Color="#1A000000" Offset="0.9"/>
                        <GradientStop Color="#00000000" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>

            <!-- Jobb oldali finom fade overlay - bal oldaléhoz hasonló, kicsit nagyobb és a tartalom mögött -->
            <Border x:Name="RightSideFade" CornerRadius="23" Width="500" HorizontalAlignment="Right" Margin="0,0,0,0" IsHitTestVisible="False" Panel.ZIndex="0" ClipToBounds="True">
                <Border.Background>
                    <!-- Gradienst megfordítva: sötét a jobb élen, átlátszó beljebb -->
                    <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                        <GradientStop Color="#F0000000" Offset="0"/>
                        <GradientStop Color="#E6000000" Offset="0.12"/>
                        <GradientStop Color="#D9000000" Offset="0.25"/>
                        <GradientStop Color="#99000000" Offset="0.45"/>
                        <GradientStop Color="#4D000000" Offset="0.65"/>
                        <GradientStop Color="#1A000000" Offset="0.8"/>
                        <GradientStop Color="#00000000" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>

            <Grid x:Name="DimOverlay" Background="#80000000" Visibility="Collapsed" Panel.ZIndex="900"/>

            <!-- Main UI container above the right-side fade so buttons are clickable and visible -->
            <Grid Panel.ZIndex="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Back button on the left — appears on Profile and Leaderboard views -->
                <Button x:Name="BackButton" Width="50" Height="50" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="14,45,0,0" Visibility="Collapsed" Click="BackButton_Click" Cursor="Hand" Panel.ZIndex="100">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="#45d2cdcf"/>
                            <Setter Property="BorderBrush" Value="Transparent"/>
                            <Setter Property="Foreground" Value="#7b7a7f"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="ProfileBorder" Background="{TemplateBinding Background}" CornerRadius="16">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="ProfileBorder" Property="Background" Value="#80FFFFFF"/>
                                                <Setter Property="Foreground" Value="#FF1A1C20"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                    <Viewbox Width="28" Height="28">
                        <!-- Simple left arrow icon, uses Foreground for color -->
                        <Path Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Stretch="Uniform" Data="M41.4 342.6C28.9 330.1 28.9 309.8 41.4 297.3L169.4 169.3C178.6 160.1 192.3 157.4 204.3 162.4C216.3 167.4 224 179.1 224 192L224 256L560 256C586.5 256 608 277.5 608 304L608 336C608 362.5 586.5 384 560 384L224 384L224 448C224 460.9 216.2 472.6 204.2 477.6C192.2 482.6 178.5 479.8 169.3 470.7L41.3 342.7z"/>
                    </Viewbox>
                </Button>



                    <!-- Jobb oldali panel -->
                    <StackPanel x:Name="WindowControlsPanel" Orientation="Vertical" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,6,10,0" Opacity="0" Panel.ZIndex="100">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Border x:Name="VersionDisplay" Background="#66000000" CornerRadius="15" Visibility="Hidden" 
                                    Padding="10,5" Margin="0,50,30,-53" Cursor="Hand" MouseLeftButtonDown="VersionDisplay_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="VersionIcon" Text="&#xE7FC;" FontFamily="Segoe MDL2 Assets" 
                                             FontSize="16" Foreground="White" 
                                             VerticalAlignment="Center" Margin="0,0,6,0"/>
                                    <StackPanel>
                                        <TextBlock x:Name="VersionCurrentText" Text="v1.0.0" 
                                                 FontSize="13" FontWeight="Bold" 
                                                 Foreground="#FFFFA726" Margin="0,-2,0,0"/>
                                        <TextBlock x:Name="VersionStatusText" Text="Naprakész" 
                                                 FontSize="10" Foreground="#E0E0E0" FontWeight="SemiBold"
                                                 Margin="0,-3,0,0" TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>
                                    <Border x:Name="UpdateIndicator" Width="8" Height="8" 
                                            Background="#FF4CAF50" CornerRadius="4" 
                                            Margin="6,0,0,0" VerticalAlignment="Center"
                                            Visibility="Collapsed"/>
                                </StackPanel>
                            </Border>

                            <!-- Minimize button -->
                            <Button x:Name="MinimizeBtn" Content="&#xE921;" FontFamily="Segoe MDL2 Assets" FontSize="12" 
                                    Click="MinimizeButton_Click" Height="30" Width="30" Margin="0,0,3,0">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background" Value="#45d2cdcf"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="#45d2cdcf"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="ButtonBorder" Background="{TemplateBinding Background}" 
                                                            CornerRadius="15" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="2">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="6,9,6,0"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="#FF1A1C20"/>
                                                            <Setter TargetName="ButtonBorder" Property="Background" Value="#80FFFFFF"/>
                                                            <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="#FF1A1C20"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <!-- Exit button egyszerűsítve -->
                            <Button x:Name="ExitBtn" Content="&#xE711;" FontFamily="Segoe MDL2 Assets" FontSize="16"
                                    Click="ExitButton_Click" Height="30" Width="30">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background" Value="#45d2cdcf"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="#7b7a7f"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="ButtonBorder" Background="{TemplateBinding Background}" 
                                                            CornerRadius="15" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="2">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,1,0,0"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="#FF1A1C20"/>
                                                            <Setter TargetName="ButtonBorder" Property="Background" Value="#80FFFFFF"/>
                                                            <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="#FF1A1C20"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                                <!-- Context menu egyszerűsítve -->
                                <Button.ContextMenu>
                                <ContextMenu x:Name="ExitContextMenu" HasDropShadow="False" Width="340" Opened="ExitContextMenu_Opened" Closed="ExitContextMenu_Closed" FontFamily="{StaticResource CustomFont3}">
                                        <ContextMenu.Template>
                                            <ControlTemplate TargetType="ContextMenu">
                                                <Border Background="#E61E2328" CornerRadius="14" BorderBrush="#4D505A60" BorderThickness="1" MinWidth="340" Panel.ZIndex="1000" Padding="12,14">
                                                    <Border.Effect>
                                                        <DropShadowEffect BlurRadius="15" ShadowDepth="3" Opacity="0.5" Direction="270" Color="Black"/>
                                                    </Border.Effect>
                                                    <Border.Triggers>
                                                        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                            <BeginStoryboard Storyboard="{StaticResource ExitMenuEntrance}"/>
                                                        </EventTrigger>
                                                    </Border.Triggers>
                                                    <StackPanel>
                                                        <ItemsPresenter Margin="0,0,0,0"/>
                                                    </StackPanel>
                                                </Border>
                                            </ControlTemplate>
                                        </ContextMenu.Template>

                                        <MenuItem Style="{StaticResource BaseMenuItemStyle}"
                                                  Header="Kilépés"
                                                  ToolTip="Program bezárás"
                                                  Tag="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"
                                                  Click="ExitOnlyMenuItem_Click"/>

                                        <Separator Margin="8" Background="#2A2A2A"/>

                                        <MenuItem Style="{StaticResource DangerMenuItemStyle}"
                                                  Header="Kijelentkezés"
                                                  ToolTip="Kijelentkezés és kilépés"
                                                  Tag="M569 337C578.4 327.6 578.4 312.4 569 303.1L425 159C418.1 152.1 407.8 150.1 398.8 153.8C389.8 157.5 384 166.3 384 176L384 256L272 256C245.5 256 224 277.5 224 304L224 336C224 362.5 245.5 384 272 384L384 384L384 464C384 473.7 389.8 482.5 398.8 486.2C407.8 489.9 418.1 487.9 425 481L569 337zM224 160C241.7 160 256 145.7 256 128C256 110.3 241.7 96 224 96L160 96C107 96 64 139 64 192L64 448C64 501 107 544 160 544L224 544C241.7 544 256 529.7 256 512C256 494.3 241.7 480 224 480L160 480C142.3 480 128 465.7 128 448L128 192C128 174.3 142.3 160 160 160L224 160z"
                                                  Click="LogoutExitMenuItem_Click"/>
                                    </ContextMenu>
                                </Button.ContextMenu>
                            </Button>
                        </StackPanel>

                        <Button x:Name="ProfileMenuButton" Width="50" Height="50" Margin="0,10,0,0"
                                HorizontalAlignment="Right" VerticalAlignment="Top" Cursor="Hand"
                                Click="ProfileButton_Click">
                            <Button.ContextMenu>
                                    <ContextMenu x:Name="ProfileContextMenu" HasDropShadow="False" Width="340" 
                                             Placement="Bottom" PlacementTarget="{Binding ElementName=ProfileMenuButton}"
                                             StaysOpen="False" 
                                             Opened="ProfileContextMenu_Opened" Closed="ProfileContextMenu_Closed" FontFamily="{StaticResource CustomFont3}">
                                    <ContextMenu.Template>
                                            <ControlTemplate TargetType="ContextMenu">
                                            <Border Background="#E61E2328" CornerRadius="14" BorderBrush="#4D505A60" BorderThickness="1" MinWidth="340" Panel.ZIndex="1000" Padding="12,14">
                                                <Border.Effect>
                                                    <DropShadowEffect BlurRadius="15" ShadowDepth="3" Opacity="0.5" Direction="270" Color="Black"/>
                                                </Border.Effect>
                                                <Border.Triggers>
                                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                        <BeginStoryboard Storyboard="{StaticResource ExitMenuEntrance}"/>
                                                    </EventTrigger>
                                                </Border.Triggers>
                                                <StackPanel>
                                                    <ItemsPresenter Margin="0,0,0,0"/>
                                                </StackPanel>
                                            </Border>
                                        </ControlTemplate>
                                    </ContextMenu.Template>
                                    
                                    <MenuItem Style="{StaticResource BaseMenuItemStyle}"
                                              Header="Kezdőlap"
                                              ToolTip="Vissza a főoldalra"
                                              Tag="M341.8 72.6C329.5 61.2 310.5 61.2 298.3 72.6L74.3 280.6C64.7 289.6 61.5 303.5 66.3 315.7C71.1 327.9 82.8 336 96 336L112 336L112 512C112 547.3 140.7 576 176 576L464 576C499.3 576 528 547.3 528 512L528 336L544 336C557.2 336 569 327.9 573.8 315.7C578.6 303.5 575.4 289.5 565.8 280.6L341.8 72.6zM304 384L336 384C362.5 384 384 405.5 384 432L384 528L256 528L256 432C256 405.5 277.5 384 304 384z" Click="ProfileHomeMenuItem_Click"/>
                                    
                                    <MenuItem Style="{StaticResource BaseMenuItemStyle}"
                                              Header="Profil"
                                              ToolTip="Profilom és statisztikáim megtekintése"
                                              Tag="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z" Click="ProfileViewMenuItem_Click"/>
                                    
                                    <MenuItem Style="{StaticResource BaseMenuItemStyle}"
                                              Header="Rangsor"
                                              ToolTip="TOP 15 játékos rangsor megtekintése"
                                              Tag="M372.2 116C372.2 136.9 359.8 155 342 163.2L448 256L552.4 235.1C547.1 227.4 544 218 544 208C544 181.5 565.5 160 592 160C618.5 160 640 181.5 640 208C640 234 619.4 255.1 593.6 256L481 506.3C470.7 529.3 447.8 544 422.6 544L217.4 544C192.2 544 169.4 529.2 159 506.3L46.4 256C20.6 255.1 0 234 0 208C0 181.5 21.5 160 48 160C74.5 160 96 181.5 96 208C96 218.1 92.9 227.4 87.6 235.1L192 256L298.1 163.1C280.4 154.8 268.1 136.8 268.1 116C268.1 87.3 291.4 64 320.1 64C348.8 64 372.1 87.3 372.1 116L372.2 116z" Click="ProfileLeaderboardMenuItem_Click"/>
                                </ContextMenu>
                            </Button.ContextMenu>
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#45d2cdcf"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="#7b7a7f"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="ProfileBorder" Background="{TemplateBinding Background}" CornerRadius="16">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="ProfileBorder" Property="Background" Value="#80FFFFFF"/>
                                                        <Setter Property="Foreground" Value="#FF1A1C20"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                            <Grid>
                                <Path Width="26" Height="26" Stretch="Uniform"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                                      Data="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/>
                                <StackPanel Visibility="Collapsed">
                                    <TextBlock x:Name="UsernameText" Text="Felhasználó"/>
                                    <TextBlock Text="Bejelentkezve"/>
                                </StackPanel>
                            </Grid>
                        </Button>
                    </StackPanel>

                <Border x:Name="CompactHeaderBar" Grid.Row="0" Height="120" Margin="0,0,0,0" CornerRadius="24,24,0,0"
                        Background="#090909"
                        Opacity="0" Visibility="Visible" VerticalAlignment="Top" Panel.ZIndex="50" UseLayoutRounding="True"
                        MouseLeftButtonDown="DragWindow" PreviewMouseWheel="CompactHeaderBar_PreviewMouseWheel">
                    <Border.RenderTransform>
                        <TranslateTransform Y="-120"/>
                    </Border.RenderTransform>
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20" ShadowDepth="4" Opacity="0.4" Direction="270"/>
                    </Border.Effect>
                    <Grid Margin="12,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Left: Menu + Play -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">

                            <!-- Play Button -->
                            <Button x:Name="CompactActionButton" Content="JÁTÉK" Width="180" Height="60" Cursor="Hand" Click="HandleActionButton_Click" Margin="60,0,-240,0">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="PlayBorder" CornerRadius="28">
                                                        <Border.Background>
                                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                                <GradientStop Color="#FFE65100" Offset="0"/>
                                                                <GradientStop Color="#FFFF9800" Offset="0.5"/>
                                                                <GradientStop Color="#FFFFA726" Offset="1"/>
                                                            </LinearGradientBrush>
                                                        </Border.Background>
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                            <Viewbox Width="70" Height="70" Margin="-23,-5,0,0">
                                                                <Grid Width="24" Height="24">
                                                                    <Grid x:Name="CompactPlayIcon" Visibility="Visible">
                                                                        <Ellipse Width="14" Height="14" Fill="#000000" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                        <Path Fill="#FFFFFF" Data="M14.75,12.83,11.55,15A1,1,0,0,1,10,14.13V9.87A1,1,0,0,1,11.55,9l3.2,2.13A1,1,0,0,1,14.75,12.83Z"/>
                                                                    </Grid>
                                                                    <Grid x:Name="CompactDownloadIcon" Visibility="Collapsed">
                                                                        <Ellipse Width="14" Height="14" Fill="#000000" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                        <Rectangle Width="3" Height="1" Fill="#FFFFFF" RadiusX="0.5" RadiusY="0.5" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,9,0,0"/>
                                                                        <Path Fill="#FFFFFF" Data="M8.71,13.71,11.29,16.3a1,1,0,0,0,1.42,0l2.58-2.58a1,1,0,0,0-.7-1.72H9.41A1,1,0,0,0,8.71,13.71Z" Margin="0,-1,0,0"/>
                                                                    </Grid>
                                                                </Grid>
                                                            </Viewbox>
                                                            <TextBlock x:Name="CompactButtonText" Text="{TemplateBinding Content}" FontFamily="{StaticResource CustomFont2}" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" Width="100" TextAlignment="Center" TextTrimming="CharacterEllipsis">
                                                                <TextBlock.Style>
                                                                    <Style TargetType="TextBlock">
                                                                        <Setter Property="FontSize" Value="15"/>
                                                                        <Setter Property="Margin" Value="0,0,0,0"/>
                                                                        <Style.Triggers>
                                                                            <Trigger Property="Text" Value="JÁTÉK">
                                                                                <Setter Property="FontSize" Value="22"/>
                                                                                <Setter Property="Margin" Value="-4,0,0,0"/>
                                                                            </Trigger>
                                                                            <Trigger Property="Text" Value="LETÖLTÉS">
                                                                                <Setter Property="FontSize" Value="13"/>
                                                                                <Setter Property="Margin" Value="0,1,0,0"/>
                                                                            </Trigger>
                                                                            <Trigger Property="Text" Value="FRISSÍTÉS">
                                                                                <Setter Property="FontSize" Value="12"/>
                                                                                <Setter Property="Margin" Value="0,1,0,0"/>
                                                                            </Trigger>
                                                                            <Trigger Property="Text" Value="TELEPÍTÉS...">
                                                                                <Setter Property="FontSize" Value="11"/>
                                                                                <Setter Property="Margin" Value="0,2,0,0"/>
                                                                            </Trigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </TextBlock.Style>
                                                            </TextBlock>
                                                        </StackPanel>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="PlayBorder" Property="Opacity" Value="0.9"/>
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="PlayBorder" Property="Opacity" Value="0.8"/>
                                                        </Trigger>
                                                        <Trigger Property="Content" Value="LETÖLTÉS">
                                                            <Setter TargetName="CompactPlayIcon" Property="Visibility" Value="Collapsed"/>
                                                            <Setter TargetName="CompactDownloadIcon" Property="Visibility" Value="Visible"/>
                                                        </Trigger>
                                                        <Trigger Property="Content" Value="FRISSÍTÉS">
                                                            <Setter TargetName="CompactPlayIcon" Property="Visibility" Value="Collapsed"/>
                                                            <Setter TargetName="CompactDownloadIcon" Property="Visibility" Value="Visible"/>
                                                        </Trigger>
                                                        <Trigger Property="Content" Value="TELEPÍTÉS...">
                                                            <Setter TargetName="CompactPlayIcon" Property="Visibility" Value="Collapsed"/>
                                                            <Setter TargetName="CompactDownloadIcon" Property="Visibility" Value="Visible"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <!-- Compact Progress Indicator -->
                            <Border x:Name="CompactProgressIndicator" Visibility="Collapsed" Height="50" Width="200"
                                    Margin="60,0,-200,0" CornerRadius="23">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                                        <GradientStop Color="#634d1a" Offset="0"/>
                                        <GradientStop Color="#55441d" Offset="0.5"/>
                                        <GradientStop Color="#46391c" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Grid Margin="5,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Percentage -->
                                    <Grid Grid.Column="0" Width="36" Height="36" Margin="0,0,5,0">
                                        <Ellipse Fill="Black"/>
                                        <Ellipse Stroke="#634d1a" StrokeThickness="5"/>
                                        <Ellipse Stroke="Black" StrokeThickness="3"/>
                                        <Path x:Name="CompactProgressRingPath"
                                              Stroke="#f1b324"
                                              StrokeThickness="3"
                                              StrokeStartLineCap="Round"
                                              StrokeEndLineCap="Round"
                                              StrokeDashArray="0 100"
                                              RenderTransformOrigin="0.5,0.5">
                                            <Path.RenderTransform>
                                                <RotateTransform Angle="-90"/>
                                            </Path.RenderTransform>
                                            <Path.Data>
                                                <EllipseGeometry Center="18,18" RadiusX="14" RadiusY="14"/>
                                            </Path.Data>
                                        </Path>
                                        <TextBlock x:Name="CompactProgressPercentage" Text="0" Foreground="#f1b324" FontSize="10" FontFamily="{StaticResource Number}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- Text Info -->
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock x:Name="CompactProgressStatus" Text="Frissítés..." FontFamily="{StaticResource CustomFont2}" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                        <TextBlock x:Name="CompactProgressSpeed" Text="0.0 MB/s" FontFamily="{StaticResource CustomFont2}" Foreground="#DDFFFFFF" FontSize="9"/>
                                    </StackPanel>

                                    <!-- Right: Pause/Resume button -->
                                    <Button Grid.Column="2" x:Name="CompactPauseResumeButton" 
                                            Width="32" Height="32" 
                                            Cursor="Hand"
                                            Click="PauseResumeButton_Click"
                                            VerticalAlignment="Center">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="#33000000"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}" 
                                                                    CornerRadius="16" 
                                                                    BorderThickness="0">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#55000000"/>
                                                                </Trigger>
                                                                <Trigger Property="IsPressed" Value="True">
                                                                    <Setter Property="Background" Value="#22000000"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                        <Grid>
                                            <!-- Pause icon (two vertical bars) -->
                                            <Canvas x:Name="CompactPauseIcon" Width="12" Height="14" Visibility="Visible">
                                                <Rectangle Width="4" Height="14" Fill="White" Canvas.Left="0"/>
                                                <Rectangle Width="4" Height="14" Fill="White" Canvas.Left="8"/>
                                            </Canvas>
                                            <!-- Resume icon (play triangle) -->
                                            <Path x:Name="CompactResumeIcon" 
                                                  Fill="White" 
                                                  Data="M0,0 L0,14 L12,7 Z" 
                                                  Width="12" Height="14"
                                                  Stretch="Fill"
                                                  Visibility="Collapsed"
                                                  Margin="2,0,0,0"/>
                                        </Grid>
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <!-- Center: Logo -->
                        <StackPanel Grid.Column="2" VerticalAlignment="Center" Orientation="Horizontal">
                            <TextBlock Text="BITFIGHTERS" Foreground="#FFFFA726" FontFamily="{StaticResource CustomFont}"
                                       FontSize="50" FontWeight="Bold" VerticalAlignment="Center">
                                <TextBlock.Effect>
                                    <DropShadowEffect ShadowDepth="0" BlurRadius="15" Color="#FFFFA726" Opacity="0.3"/>
                                </TextBlock.Effect>
                            </TextBlock>
                        </StackPanel>
                    </Grid>
                </Border>


                <!-- Scrollable Content -->
                <ScrollViewer x:Name="MainScrollViewer" Grid.Row="1" Style="{StaticResource ModernScrollViewerStyle}" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" PanningMode="VerticalOnly">
                    <Grid Width="1196">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/> <!-- Main Content (Hero + News) -->
                            <RowDefinition Height="Auto"/> <!-- Other views -->
                            <RowDefinition Height="180"/> <!-- Extra scroll space -->
                        </Grid.RowDefinitions>

                        <!-- Fő tartalom grid -->
                        <Grid x:Name="MainContentGrid" Grid.Row="0" Opacity="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="580"/> <!-- Hero Section Height (Window Height 700 - TopBar 120) -->
                                <RowDefinition Height="Auto"/> <!-- News/Patch Notes Section -->
                            </Grid.RowDefinitions>

                            <!-- Hero Section (Play Button, Title) -->
                            <Grid Grid.Row="0">
                                <!-- Text above play button -->
                                <TextBlock x:Name="HeroTitle" Text="BITFIGHTERS" 
                                           FontSize="90" 
                                           FontFamily="{StaticResource CustomFont}"
                                           Foreground="#FFFFA726"
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"
                                           Margin="0,0,0,350">
                                    <TextBlock.RenderTransform>
                                        <!-- Use TransformGroup so we can animate scale and translate via RenderTransform (no LayoutTransform jitter) -->
                                        <TransformGroup>
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                            <TranslateTransform X="0" Y="0" />
                                        </TransformGroup>
                                    </TextBlock.RenderTransform>
                                    <TextBlock.Effect>
                                        <DropShadowEffect ShadowDepth="0" BlurRadius="15" Color="#FFFFA726" Opacity="0.7"/>
                                    </TextBlock.Effect>
                                </TextBlock>


                                <!-- Download status bar under title -->
                                <Border x:Name="ProgressIndicatorBorder" Visibility="Collapsed" 
                                        CornerRadius="25" 
                                        Width="240" Height="55" 
                                        HorizontalAlignment="Center" VerticalAlignment="Center"
                                        BorderThickness="0"
                                        Margin="0,0,0,170">
                                    <Border.RenderTransform>
                                        <TranslateTransform x:Name="ProgressBarTransform" X="0" Y="0"/>
                                    </Border.RenderTransform>
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                                            <GradientStop Color="#634d1a" Offset="0"/>
                                            <GradientStop Color="#55441d" Offset="0.5"/>
                                            <GradientStop Color="#46391c" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid Margin="10,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Left: Percentage circle -->
                                        <Grid Grid.Column="0" Width="38" Height="38" VerticalAlignment="Center" Margin="0,0,14,0">
                                            <Ellipse Fill="Black"/>
                                            <Ellipse Stroke="#634d1a" StrokeThickness="5.3"/>
                                            <Ellipse Stroke="Black" StrokeThickness="3"/>
                                            <Path x:Name="ProgressRingPath"
                                                  Stroke="#f1b324"
                                                  StrokeThickness="3"
                                                  StrokeStartLineCap="Round"
                                                  StrokeEndLineCap="Round"
                                                  StrokeDashArray="0 31.416"
                                                  RenderTransformOrigin="0.5,0.5">
                                                <Path.RenderTransform>
                                                    <RotateTransform Angle="-90"/>
                                                </Path.RenderTransform>
                                                <Path.Data>
                                                    <EllipseGeometry Center="19,19" RadiusX="15" RadiusY="15"/>
                                                </Path.Data>
                                            </Path>
                                            <TextBlock x:Name="ProgressPercentageCircle"
                                                       Text="0" 
                                                       Foreground="#f1b324" 
                                                       FontSize="10"
                                                       Margin="0,1,0,0"
                                                       FontFamily="{StaticResource Number }"
                                                       HorizontalAlignment="Center" 
                                                       VerticalAlignment="Center"/>
                                        </Grid>
                                        
                                        <!-- Center: Status text and speed -->
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="0,0,10,0">
                                            <TextBlock x:Name="ProgressStatusText"
                                                       Text="Frissítés..." 
                                                       FontFamily="{StaticResource CustomFont2}"
                                                       Foreground="White" FontSize="12" FontWeight="Bold"
                                                       Margin="0,0,0,2"/>
                                            <TextBlock x:Name="ProgressSpeedText" 
                                                       Text="0.7 MB/s" 
                                                       FontFamily="{StaticResource CustomFont2}"
                                                       Foreground="#DDFFFFFF" FontSize="10" FontWeight="SemiBold"/>
                                        </StackPanel>
                                        
                                        <!-- Right: Pause/Resume button -->
                                        <Button Grid.Column="2" x:Name="PauseResumeButton" 
                                                Width="32" Height="32" 
                                                Cursor="Hand"
                                                Click="PauseResumeButton_Click"
                                                VerticalAlignment="Center">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#33000000"/>
                                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        CornerRadius="16" 
                                                                        BorderThickness="0">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="Background" Value="#55000000"/>
                                                                    </Trigger>
                                                                    <Trigger Property="IsPressed" Value="True">
                                                                        <Setter Property="Background" Value="#22000000"/>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                            <Grid>
                                                <!-- Pause icon (two vertical bars) -->
                                                <Canvas x:Name="PauseIcon" Width="12" Height="14" Visibility="Visible">
                                                    <Rectangle Width="4" Height="14" Fill="White" Canvas.Left="0"/>
                                                    <Rectangle Width="4" Height="14" Fill="White" Canvas.Left="8"/>
                                                </Canvas>
                                                <!-- Resume icon (play triangle) -->
                                                <Path x:Name="ResumeIcon" 
                                                      Fill="White"
                                                      Margin="3,0,0,0"
                                                      Data="M0,0 L0,14 L12,7 Z" 
                                                      Width="12" Height="14"
                                                      Stretch="Fill"
                                                      Visibility="Collapsed"/>
                                            </Grid>
                                        </Button>
                                    </Grid>
                                </Border>

                                <!-- Action button -->
                                <Grid x:Name="ActionButtonContainer" Width="310" Height="310" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20,0,0,160">
                                    <Grid.RenderTransform>
                                        <!-- Combine scale + translate in RenderTransform to avoid LayoutTransform layout passes -->
                                        <TransformGroup>
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                            <TranslateTransform X="0" Y="0" />
                                        </TransformGroup>
                                    </Grid.RenderTransform>
                                    <Button x:Name="ActionButton" Cursor="Hand" Click="HandleActionButton_Click" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" RenderTransformOrigin="0.5,0.5">
                                        <Button.RenderTransform>
                                            <TransformGroup>
                                                <ScaleTransform/>
                                                <SkewTransform AngleX="0.095"/>
                                                <RotateTransform/>
                                                <TranslateTransform X="0.248"/>
                                            </TransformGroup>
                                        </Button.RenderTransform>
                                        <Button.Style>
                                            <Style TargetType="{x:Type Button}">
                                                <Setter Property="Background" Value="Transparent" />
                                                <Setter Property="BorderBrush" Value="Transparent" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type Button}">
                                                            <Grid>
                                                                <Border x:Name="InnerBorder" Width="190" Height="60" CornerRadius="28" BorderThickness="0" BorderBrush="Transparent" Padding="0">
                                                                    <Border.Background>
                                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,2">
                                                                            <LinearGradientBrush.RelativeTransform>
                                                                                <RotateTransform Angle="30" CenterX="0.5" CenterY="0.5"/>
                                                                            </LinearGradientBrush.RelativeTransform>
                                                                            <GradientStop Color="#FFE65100" Offset="0"/>
                                                                            <GradientStop Color="#FFFF9800" Offset="0.5"/>
                                                                            <GradientStop Color="#FFFFA726" Offset="1"/>
                                                                        </LinearGradientBrush>
                                                                    </Border.Background>
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                                </Border>
                                                            </Grid>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter TargetName="InnerBorder" Property="Opacity" Value="0.9"/>
                                                                </Trigger>
                                                                <Trigger Property="IsPressed" Value="True">
                                                                    <Setter TargetName="InnerBorder" Property="Opacity" Value="0.8"/>
                                                                </Trigger>
                                                                <Trigger Property="IsEnabled" Value="False">
                                                                    <Setter TargetName="InnerBorder" Property="Opacity" Value="0.5"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                        <Grid>
                                            <!-- Normal button content -->
                                            <StackPanel x:Name="ButtonContentPanel" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,2.5,0,0">
                                                <Viewbox Width="70" Height="70" Margin="0,-7,0,0">
                                                    <Grid Width="24" Height="24">
                                                        <!-- Play Icon -->
                                                        <Grid x:Name="PlayIconGrid" Visibility="Visible">
                                                            <Ellipse Width="14" Height="14" Fill="#000000" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            <Path Fill="#FFFFFF"
                                                                  Data="M14.75,12.83,11.55,15A1,1,0,0,1,10,14.13V9.87A1,1,0,0,1,11.55,9l3.2,2.13A1,1,0,0,1,14.75,12.83Z"/>
                                                        </Grid>
                                                        <!-- Download Icon -->
                                                        <Grid x:Name="DownloadIconGrid" Visibility="Collapsed">
                                                            <Ellipse Width="14" Height="14" Fill="#000000" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="2,0,0,0"/>
                                                            <Rectangle Width="3" Height="1" Fill="#FFFFFF" RadiusX="0.5" RadiusY="0.5" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="1,9,0,0"/>
                                                            <Path Fill="#FFFFFF" Data="M8.71,13.71,11.29,16.3a1,1,0,0,0,1.42,0l2.58-2.58a1,1,0,0,0-.7-1.72H9.41A1,1,0,0,0,8.71,13.71Z" Margin="1,-1,0,0"/>
                                                        </Grid>
                                                    </Grid>
                                                </Viewbox>
                                                <TextBlock x:Name="ButtonText" FontFamily="{StaticResource CustomFont2}" Text="JÁTÉK" Width="128" Height="24" TextAlignment="Center" Foreground="White">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="FontSize" Value="17"/>
                                                            <Setter Property="Margin" Value="-10,0,17,0"/>
                                                            <Style.Triggers>
                                                                <Trigger Property="Text" Value="JÁTÉK">
                                                                    <Setter Property="FontSize" Value="22"/>
                                                                    <Setter Property="Margin" Value="-16,0,17,6"/>
                                                                </Trigger>
                                                                <Trigger Property="Text" Value="LETÖLTÉS">
                                                                    <Setter Property="FontSize" Value="15"/>
                                                                    <Setter Property="Margin" Value="-10,1,17,0"/>
                                                                </Trigger>
                                                                <Trigger Property="Text" Value="FRISSÍTÉS">
                                                                    <Setter Property="FontSize" Value="14"/>
                                                                    <Setter Property="Margin" Value="-10,1,17,0"/>
                                                                </Trigger>
                                                                <Trigger Property="Text" Value="TELEPÍTÉS...">
                                                                    <Setter Property="FontSize" Value="13"/>
                                                                    <Setter Property="Margin" Value="-10,2,17,0"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </StackPanel>
                                        </Grid>
                                    </Button>

                                    <!-- Compact Progress Indicator moved under the title -->
                                </Grid>

                            <!-- Hero Section End -->
                            </Grid>

                            <!-- Patch notes in second row -->
                            <Border x:Name="NewsPanelBorder" Grid.Row="1" CornerRadius="6" Margin="65,-150,65,30" Opacity="0" VerticalAlignment="Top" HorizontalAlignment="Stretch">
                                <Grid HorizontalAlignment="Stretch">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0" Margin="12,0,12,40">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Button x:Name="LearnMoreButton" Grid.Column="0" HorizontalAlignment="Left" Cursor="Hand" Width="180" Height="40" Click="LearnMoreButton_Click">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#FF2A2A2A"/>
                                                    <Setter Property="BorderBrush" Value="#FF3A3A3A"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border x:Name="ButtonBorder" Background="{TemplateBinding Background}" 
                                                                        CornerRadius="6" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter TargetName="ButtonBorder" Property="Background" Value="#FF3A3A3A"/>
                                                                        <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="#FF5A5A5A"/>
                                                                    </Trigger>
                                                                    <Trigger Property="IsPressed" Value="True">
                                                                        <Setter TargetName="ButtonBorder" Property="Background" Value="#FF1A1A1A"/>
                                                                        <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="#FF2A2A2A"/>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="TUDJ MEG TÖBBET" FontSize="12" FontFamily="{StaticResource CustomFont2}" Foreground="White" VerticalAlignment="Center"/>
                                            </StackPanel>
                                        </Button>
                                        <Button x:Name="MuteButton" Grid.Column="2" Width="50" Height="50" HorizontalAlignment="Right" Cursor="Hand">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#45d2cdcf"/>
                                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                                    <Setter Property="Foreground" Value="#7b7a7f"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border x:Name="ProfileBorder" Background="{TemplateBinding Background}" CornerRadius="16">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter TargetName="ProfileBorder" Property="Background" Value="#80FFFFFF"/>
                                                                        <Setter Property="Foreground" Value="#FF1A1C20"/>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                            <Grid>
                                                <Viewbox x:Name="VolumeIcon" Width="25" Height="25">
                                                    <Path Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Stretch="Uniform" Data="M112 416L160 416L294.1 535.2C300.5 540.9 308.7 544 317.2 544C336.4 544 352 528.4 352 509.2L352 130.8C352 111.6 336.4 96 317.2 96C308.7 96 300.5 99.1 294.1 104.8L160 224L112 224C85.5 224 64 245.5 64 272L64 368C64 394.5 85.5 416 112 416zM505.1 171C494.8 162.6 479.7 164.2 471.3 174.5C462.9 184.8 464.5 199.9 474.8 208.3C507.3 234.7 528 274.9 528 320C528 365.1 507.3 405.3 474.8 431.8C464.5 440.2 463 455.3 471.3 465.6C479.6 475.9 494.8 477.4 505.1 469.1C548.3 433.9 576 380.2 576 320.1C576 260 548.3 206.3 505.1 171.1zM444.6 245.5C434.3 237.1 419.2 238.7 410.8 249C402.4 259.3 404 274.4 414.3 282.8C425.1 291.6 432 305 432 320C432 335 425.1 348.4 414.3 357.3C404 365.7 402.5 380.8 410.8 391.1C419.1 401.4 434.3 402.9 444.6 394.6C466.1 376.9 480 350.1 480 320C480 289.9 466.1 263.1 444.5 245.5z"/>
                                                </Viewbox>
                                                <Viewbox x:Name="MutedIcon" Width="26" Height="26" Visibility="Collapsed" Margin="0,0,-2,-1">
                                                    <Path Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Stretch="Uniform" Data="M80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416zM399 239C389.6 248.4 389.6 263.6 399 272.9L446 319.9L399 366.9C389.6 376.3 389.6 391.5 399 400.8C408.4 410.1 423.6 410.2 432.9 400.8L479.9 353.8L526.9 400.8C536.3 410.2 551.5 410.2 560.8 400.8C570.1 391.4 570.2 376.2 560.8 366.9L513.8 319.9L560.8 272.9C570.2 263.5 570.2 248.3 560.8 239C551.4 229.7 536.2 229.6 526.9 239L479.9 286L432.9 239C423.5 229.6 408.3 229.6 399 239z"/>
                                                </Viewbox>
                                            </Grid>
                                        </Button>
                                    </Grid>
                                    <ScrollViewer Grid.Row="1" x:Name="NewsScrollViewer" Style="{StaticResource ModernScrollViewerStyle}" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled" PanningMode="HorizontalOnly" PreviewMouseWheel="NewsScrollViewer_PreviewMouseWheel" ScrollChanged="NewsScrollViewer_ScrollChanged">
                                        <ItemsControl x:Name="NewsItemsControl" HorizontalAlignment="Stretch">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Rows="1"/>
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="#DD000000" CornerRadius="10" Margin="10,0,10,5" Height="210" BorderBrush="#44FFFFFF" BorderThickness="0" Cursor="Hand" MouseLeftButtonDown="NewsItem_Click">
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="BorderBrush" Value="#88FFFFFF"/>
                                                                        <Setter Property="BorderThickness" Value="2"/>
                                                                    </Trigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <Grid ClipToBounds="True">
                                                            <!-- Background image placeholder with gradient -->
                                                            <Border x:Name="NewsImageBackground" CornerRadius="10" ClipToBounds="True">
                                                                <Border.Background>
                                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                                        <GradientStop Color="#FF1A1C20" Offset="0"/>
                                                                        <GradientStop Color="#FF2D2F35" Offset="0.5"/>
                                                                        <GradientStop Color="#FF000000" Offset="1"/>
                                                                    </LinearGradientBrush>
                                                                </Border.Background>
                                                            </Border>
                                                            
                                                            <!-- Top label (GAME UPDATE) -->
                                                            <Border HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,12,10,0" 
                                                                    Background="#FFd2cdcf" CornerRadius="12" Padding="5,2" 
                                                                    BorderThickness="1">
                                                                <TextBlock Text="GAME UPDATE" Foreground="Black" FontSize="12" 
                                                                           FontFamily="{StaticResource CustomFont2}" />
                                                            </Border>
                                                            
                                                            <!-- Bottom gradient overlay for text -->
                                                            <Border CornerRadius="0,0,12,12" VerticalAlignment="Bottom" Height="100">
                                                                <Border.Background>
                                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                                        <GradientStop Color="#00000000" Offset="0"/>
                                                                        <GradientStop Color="#CC000000" Offset="0.5"/>
                                                                        <GradientStop Color="#EE000000" Offset="1"/>
                                                                    </LinearGradientBrush>
                                                                </Border.Background>
                                                            </Border>
                                                            
                                                            <!-- Title and date at bottom -->
                                                            <StackPanel VerticalAlignment="Bottom" Margin="16,0,16,16">
                                                                <TextBlock Text="{Binding Title}" Foreground="White"  
                                                                           FontSize="17" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" 
                                                                           MaxHeight="60" Margin="0,0,0,8" FontFamily="{StaticResource CustomFont2}"/>
                                                                <Border Background="#33FFFFFF" Height="1" Margin="0,0,0,8"/>
                                                                <TextBlock Text="{Binding FormattedDate}" Foreground="#CCFFA726" 
                                                                           FontSize="10" FontFamily="{StaticResource CustomFont2}"  />
                                                            </StackPanel>
                                                        </Grid>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                </Grid>
                            </Border>
                        </Grid> <!-- Closing MainContentGrid -->

                        <!-- Profil nézet -->
                        <Grid x:Name="ProfileViewGrid" Visibility="Collapsed" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                        <StackPanel Width="600" HorizontalAlignment="Center">
                            <Border Background="#77000000" CornerRadius="20" Padding="30" Margin="0,0,0,30">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Avatar: fixed size circular image with orange gradient ring -->
                                    <Border Grid.Column="0" Width="120" Height="120" CornerRadius="60" 
                                            Margin="0,0,30,0" ClipToBounds="True" Background="Transparent">
                                        <Grid Width="120" Height="120" HorizontalAlignment="Left" VerticalAlignment="Top">
                                            <!-- Background circle (subtle dark) -->
                                            <Ellipse Fill="#FF0F1113" Width="120" Height="120" />

                                            <!-- Actual profile image: keep Image control for existing code-behind, force size and clip -->
                                            <Image x:Name="ProfileImage" Width="112" Height="112" Stretch="UniformToFill" Visibility="Collapsed" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Image.Clip>
                                                    <!-- ensure image is circular -->
                                                    <EllipseGeometry Center="56,56" RadiusX="56" RadiusY="56"/>
                                                </Image.Clip>
                                            </Image>

                                            <!-- Default vector avatar shown when no profile image available -->
                                            <Viewbox x:Name="DefaultAvatarViewbox" Width="80" Height="80" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Canvas Width="640" Height="640">
                                                    <Path Fill="#FF1A1C20" Data="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/>
                                                </Canvas>
                                            </Viewbox>

                                            <!-- Orange gradient ring (stroke) -->
                                            <Ellipse Width="115" Height="115" Fill="Transparent" StrokeThickness="3" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Ellipse.Stroke>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#FFE65100" Offset="0"/>
                                                        <GradientStop Color="#FFFF9800" Offset="0.5"/>
                                                        <GradientStop Color="#FFFFA726" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Ellipse.Stroke>
                                            </Ellipse>
                                        </Grid>
                                    </Border>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock x:Name="ProfileUsernameText" Text="Felhasználó" FontFamily="{StaticResource CustomFont3}" 
                                                   FontSize="32" FontWeight="Bold" Foreground="{StaticResource OrangeGradient}" Margin="0,0,0,15"/>
                                        <TextBlock x:Name="ProfileRankText" Text="🔰 Kezdő" 
                                                   FontSize="18" Foreground="White" FontFamily="{StaticResource CustomFont3}"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Background="#77000000" CornerRadius="15" Padding="25">
                                    <StackPanel HorizontalAlignment="Center">
                                        <Viewbox Width="40" Height="40" HorizontalAlignment="Center" Margin="0,0,0,10">
                                            <Canvas Width="640" Height="640">
                                                <Path Fill="{StaticResource OrangeGradient}" Data="M208.3 64L432.3 64C458.8 64 480.4 85.8 479.4 112.2C479.2 117.5 479 122.8 478.7 128L528.3 128C554.4 128 577.4 149.6 575.4 177.8C567.9 281.5 514.9 338.5 457.4 368.3C441.6 376.5 425.5 382.6 410.2 387.1C390 415.7 369 430.8 352.3 438.9L352.3 512L416.3 512C434 512 448.3 526.3 448.3 544C448.3 561.7 434 576 416.3 576L224.3 576C206.6 576 192.3 561.7 192.3 544C192.3 526.3 206.6 512 224.3 512L288.3 512L288.3 438.9C272.3 431.2 252.4 416.9 233 390.6C214.6 385.8 194.6 378.5 175.1 367.5C121 337.2 72.2 280.1 65.2 177.6C63.3 149.5 86.2 127.9 112.3 127.9L161.9 127.9C161.6 122.7 161.4 117.5 161.2 112.1C160.2 85.6 181.8 63.9 208.3 63.9zM165.5 176L113.1 176C119.3 260.7 158.2 303.1 198.3 325.6C183.9 288.3 172 239.6 165.5 176zM444 320.8C484.5 297 521.1 254.7 527.3 176L475 176C468.8 236.9 457.6 284.2 444 320.8z"/>
                                            </Canvas>
                                        </Viewbox>
                                        <TextBlock Text="Legmagasabb pontszám" FontSize="16" FontWeight="SemiBold" 
                                                   Foreground="{StaticResource OrangeGradient}" HorizontalAlignment="Center" FontFamily="{StaticResource CustomFont3}" Margin="0,0,0,10"/>
                                        <TextBlock x:Name="ProfileHighestScoreText" Text="0" FontSize="28" FontWeight="Bold" 
                                                   Foreground="White" HorizontalAlignment="Center" FontFamily="{StaticResource Number}"/>
                                    </StackPanel>
                                </Border>

                                <Border Grid.Column="2" Background="#77000000" CornerRadius="15" Padding="25">
                                    <StackPanel HorizontalAlignment="Center">
                                        <Viewbox Width="40" Height="40" HorizontalAlignment="Center" Margin="0,0,0,10">
                                            <Canvas Width="640" Height="640">
                                                <Path Fill="{StaticResource OrangeGradient}" Data="M320.3 192L235.7 51.1C229.2 40.3 215.6 36.4 204.4 42L117.8 85.3C105.9 91.2 101.1 105.6 107 117.5L176.6 256.6C146.5 290.5 128.3 335.1 128.3 384C128.3 490 214.3 576 320.3 576C426.3 576 512.3 490 512.3 384C512.3 335.1 494 290.5 464 256.6L533.6 117.5C539.5 105.6 534.7 91.2 522.9 85.3L436.2 41.9C425 36.3 411.3 40.3 404.9 51L320.3 192zM351.1 334.5C352.5 337.3 355.1 339.2 358.1 339.6L408.2 346.9C415.9 348 418.9 357.4 413.4 362.9L377.1 398.3C374.9 400.5 373.9 403.5 374.4 406.6L383 456.5C384.3 464.1 376.3 470 369.4 466.4L324.6 442.8C321.9 441.4 318.6 441.4 315.9 442.8L271.1 466.4C264.2 470 256.2 464.2 257.5 456.5L266.1 406.6C266.6 403.6 265.6 400.5 263.4 398.3L227.1 362.9C221.5 357.5 224.6 348.1 232.3 346.9L282.4 339.6C285.4 339.2 288.1 337.2 289.4 334.5L311.8 289.1C315.2 282.1 325.1 282.1 328.6 289.1L351 334.5z"/>
                                            </Canvas>
                                        </Viewbox>
                                        <TextBlock Text="Rangsor helyezés" FontSize="16" FontWeight="SemiBold" 
                                                   Foreground="{StaticResource OrangeGradient}" HorizontalAlignment="Center" FontFamily="{StaticResource CustomFont3}" Margin="0,0,0,10"/>
                                        <TextBlock x:Name="ProfileUserRankText" Text="N/A" FontSize="28" FontWeight="Bold" 
                                                   Foreground="White" HorizontalAlignment="Center" FontFamily="{StaticResource Number}"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>
                        <Border Grid.Row="2" Background="Transparent"/>
                    </Grid>

                    <!-- Leaderboard view -->
                    <Grid x:Name="LeaderboardViewGrid" Visibility="Collapsed" Margin="40,25,20,0">
                        <StackPanel>
                                <TextBlock Text="TOP 15 JÁTÉKOS" Foreground="{StaticResource OrangeGradient}" FontSize="22" FontWeight="Bold" HorizontalAlignment="Center" FontFamily="{StaticResource CustomFont3}"/>
                                <Rectangle Height="1" Fill="#7b7a7f" Margin="0,10,0,20" HorizontalAlignment="Center" Width="350"/>

                            <Border Background="#99000000" CornerRadius="8" BorderBrush="#33CCCCCC" BorderThickness="0,0,0,1" Margin="0,0,40,10" Padding="12,0,12,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="140"/>
                                    </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Helyezés" Foreground="{StaticResource OrangeGradient}" Margin="0,7,0,0" FontSize="16" HorizontalAlignment="Center" FontFamily="{StaticResource CustomFont3}" />
                                        <TextBlock Grid.Column="1" Text="Felhasználónév" Foreground="{StaticResource OrangeGradient}" Margin="0,7,0,0" FontSize="16" FontFamily="{StaticResource CustomFont3}" />
                                        <TextBlock Grid.Column="2" Text="Pontszám" Foreground="{StaticResource OrangeGradient}" Margin="0,7,0,0" FontSize="16" HorizontalAlignment="Right" FontFamily="{StaticResource CustomFont3}" />
                                </Grid>
                            </Border>

                            <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500">
                                <ItemsControl x:Name="LeaderboardItemsControl">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#99000000" CornerRadius="8" Margin="0,0,40,8" Padding="12">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="90"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="140"/>
                                                    </Grid.ColumnDefinitions>

                                                        <TextBlock Grid.Column="0" Text="{Binding rank, StringFormat='#{0}'}" Foreground="White" Margin="0,0,0,0" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" FontFamily="{StaticResource Number}" />
                                                        <TextBlock Grid.Column="1" Text="{Binding username}" Foreground="White" Margin="45,0,0,0" FontSize="18" VerticalAlignment="Center" FontFamily="{StaticResource CustomFont3}" />
                                                        <TextBlock Grid.Column="2" Text="{Binding highest_score}" Foreground="White" Margin="0,0,23,0" FontSize="18" FontWeight="SemiBold" HorizontalAlignment="Right" VerticalAlignment="Center" FontFamily="{StaticResource Number}" />
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </StackPanel>
                    </Grid>
                </Grid>
                </ScrollViewer>

                <!-- Modern notification border -->
                <Border x:Name="NotificationBorder" Grid.Row="0" Grid.RowSpan="2" MinHeight="56" Opacity="0" CornerRadius="28" Margin="25,90,20,0" HorizontalAlignment="Center" VerticalAlignment="Top" Visibility="Collapsed"
                        RenderTransformOrigin="0.5,0.5">
                    <Border.RenderTransform>
                        <!-- Combine translate + scale for storyboard targeting -->
                        <TransformGroup>
                            <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                            <TranslateTransform Y="-12"/>
                        </TransformGroup>
                    </Border.RenderTransform>
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20" ShadowDepth="6" Color="#FF000000" Opacity="0.45"/>
                    </Border.Effect>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#CC111315" Offset="0"/>
                            <GradientStop Color="#AA151618" Offset="0.5"/>
                            <GradientStop Color="#99121314" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Padding>18,10</Border.Padding>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="12"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Accent circle with centered check icon (vector for precise centering) -->
                        <Grid Grid.Column="0" Width="36" Height="36" HorizontalAlignment="Left" VerticalAlignment="Center">
                            <Ellipse Fill="#111" Stroke="#FFFFA726" StrokeThickness="2" Opacity="0.95"/>
                            <Viewbox Margin="4" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Canvas Width="24" Height="24">
                                    <!-- Simple vector check path, stroked to ensure perfect centering -->
                                    <Path Data="M6,12 L10,16 L18,8"
                                          Stroke="#FFFFA726"
                                          StrokeThickness="2.6"
                                          StrokeStartLineCap="Round"
                                          StrokeEndLineCap="Round"
                                          StrokeLineJoin="Round"
                                          Fill="Transparent"/>
                                </Canvas>
                            </Viewbox>
                        </Grid>

                        <!-- Spacer -->
                        <Grid Grid.Column="1"/>

                        <!-- Message text -->
                        <TextBlock x:Name="NotificationText" Grid.Column="2" Foreground="White" FontSize="16" FontWeight="Bold" VerticalAlignment="Center" TextTrimming="CharacterEllipsis" FontFamily="{StaticResource CustomFont2}"/>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>