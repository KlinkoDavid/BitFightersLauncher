<Window x:Class="BitFightersLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        Title="BitFighters Launcher" Height="700" Width="1200"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        Icon="/Resources/Logo.png"
        x:Name="BitFightersWindow"
        UseLayoutRounding="True" SnapsToDevicePixels="True"
        RenderOptions.BitmapScalingMode="HighQuality"
        TextOptions.TextRenderingMode="ClearType"
        CacheMode="BitmapCache">

    <Window.Resources>
        <CubicEase x:Key="EntranceEase" EasingMode="EaseOut"/>

        <SolidColorBrush x:Key="PrimaryOrange" Color="#FFFFA726"/>
        <SolidColorBrush x:Key="SecondaryOrange" Color="#FFFF9800"/>
        <SolidColorBrush x:Key="LightOrange" Color="#FFFFAB40"/>
        <SolidColorBrush x:Key="DarkOrange" Color="#FFE65100"/>

        <!-- Még gyorsabb és egyszerűbb animációk -->
        <Storyboard x:Key="ContentEntranceAnimation">
            <DoubleAnimation Storyboard.TargetName="TopBarGrid" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.2" BeginTime="0:0:0.05"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="NavPanelContainer" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="NewsPanelBorder" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.2" BeginTime="0:0:0.15"
                             EasingFunction="{StaticResource EntranceEase}"/>
            <DoubleAnimation Storyboard.TargetName="MainContentGrid" Storyboard.TargetProperty="Opacity"
                             To="1" Duration="0:0:0.2" BeginTime="0:0:0.2"
                             EasingFunction="{StaticResource EntranceEase}"/>
        </Storyboard>

        <!-- Minimál notification animációk -->
        <Storyboard x:Key="ShowNotification">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.15"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Duration="0">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="HideNotification">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" BeginTime="0:0:0.15" Duration="0">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Collapsed}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Minimál exit menu animáció -->
        <Storyboard x:Key="ExitMenuEntrance">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             From="0" To="1" Duration="0:0:0.1"/>
        </Storyboard>

        <sys:Double x:Key="NewsItemHeight">90</sys:Double>
        <sys:Double x:Key="NewsBarHeight">56</sys:Double>
    </Window.Resources>

    <!-- Properly clipped border with correct background -->
    <Border x:Name="RootBorder" CornerRadius="25" BorderBrush="#44CCCCCC" BorderThickness="2" 
            Background="#FF1A1C20" ClipToBounds="True">
        <Border.Triggers>
            <EventTrigger RoutedEvent="Loaded">
                <BeginStoryboard Storyboard="{StaticResource ContentEntranceAnimation}"/>
            </EventTrigger>
        </Border.Triggers>

        <Grid>
            <!-- Background image with proper clipping -->
            <Border CornerRadius="23" ClipToBounds="True">
                <Border.Background>
                    <ImageBrush ImageSource="/Resources/BG.png" Stretch="UniformToFill"/>
                </Border.Background>
            </Border>
            
            <!-- Egyszerű sötétítő réteg -->
            <Border CornerRadius="23" Background="#70000000" Opacity="0.7"/>
            
            <!-- Csökkentett háttér effekt - kevesebb gradient stop -->
            <Border CornerRadius="23" ClipToBounds="True">
                <Grid>
                    <Ellipse Width="400" Height="150" VerticalAlignment="Top" Margin="0,-75,0,0" HorizontalAlignment="Center">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="#10FFA726" Offset="0"/>
                                <GradientStop Color="#00FFA726" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>

                    <Ellipse Width="150" Height="75" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="-75,0,0,0">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="#05CC7A00" Offset="0"/>
                                <GradientStop Color="#00CC7A00" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
                </Grid>
            </Border>

            <Grid x:Name="DimOverlay" Background="#80000000" Visibility="Collapsed" Panel.ZIndex="900"/>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Top bar with proper transparency -->
                <Grid x:Name="TopBarGrid" Height="80" VerticalAlignment="Top" MouseLeftButtonDown="DragWindow" 
                      HorizontalAlignment="Stretch" Background="#33000000" Opacity="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="200"/>
                    </Grid.ColumnDefinitions>

                    <!-- User info panel -->
                    <Border Background="#66000000" CornerRadius="15" 
                            HorizontalAlignment="Left" VerticalAlignment="Center" 
                            Margin="25,0,0,0" Padding="12,6">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE77B;" FontFamily="Segoe MDL2 Assets" 
                                     FontSize="16" Foreground="#FFFFA726" 
                                     VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <StackPanel>
                                <TextBlock x:Name="UsernameText" Text="Felhasználó" 
                                         FontSize="13" FontWeight="Bold" 
                                         Foreground="#FFFFA726" Margin="0,-2,0,0"/>
                                <TextBlock Text="Bejelentkezve" 
                                         FontSize="10" Foreground="#66BB6A" FontWeight="SemiBold"
                                         Margin="0,-3,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Központi logo panel -->
                    <DockPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Border Background="#66000000" CornerRadius="20" Padding="20,12" 
                                HorizontalAlignment="Center" VerticalAlignment="Center">
                            <DockPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Border Background="#22FFA726" CornerRadius="12" Padding="2" Margin="0,0,15,0">
                                    <Image Source="/Resources/Logo.png" Width="40"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="BITFIGHTERS" FontSize="24" FontWeight="Bold" Foreground="#FFFFA726" 
                                             Margin="0,-2,0,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Game Launcher" FontSize="11" Foreground="#AAFFA726" 
                                             FontWeight="SemiBold" Margin="0,-4,0,0"/>
                                </StackPanel>
                            </DockPanel>
                        </Border>
                    </DockPanel>

                    <!-- Jobb oldali panel -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,10,0">
                        <Border x:Name="VersionDisplay" Background="#66000000" CornerRadius="15" 
                                Padding="10,5" Margin="0,0,8,0" Cursor="Hand" MouseLeftButtonDown="VersionDisplay_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="VersionIcon" Text="&#xE7FC;" FontFamily="Segoe MDL2 Assets" 
                                         FontSize="16" Foreground="White" 
                                         VerticalAlignment="Center" Margin="0,0,6,0"/>
                                <StackPanel>
                                    <TextBlock x:Name="VersionCurrentText" Text="v1.0.0" 
                                             FontSize="13" FontWeight="Bold" 
                                             Foreground="#FFFFA726" Margin="0,-2,0,0"/>
                                    <TextBlock x:Name="VersionStatusText" Text="Naprakész" 
                                             FontSize="10" Foreground="#E0E0E0" FontWeight="SemiBold"
                                             Margin="0,-3,0,0" TextTrimming="CharacterEllipsis"/>
                                </StackPanel>
                                <Border x:Name="UpdateIndicator" Width="8" Height="8" 
                                        Background="#FF4CAF50" CornerRadius="4" 
                                        Margin="6,0,0,0" VerticalAlignment="Center"
                                        Visibility="Collapsed"/>
                            </StackPanel>
                        </Border>

                        <!-- Exit button egyszerűsítve -->
                        <Button x:Name="ExitBtn" Content="&#xE711;" FontFamily="Segoe MDL2 Assets" FontSize="16" 
                                Click="ExitButton_Click" Height="30" Width="30">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#44000000"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="#FFFFAB40"/>
                                    <Setter Property="Cursor" Value="Hand"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="ButtonBorder" Background="{TemplateBinding Background}" 
                                                        CornerRadius="15" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="#FFFF4444"/>
                                                        <Setter TargetName="ButtonBorder" Property="Background" Value="#66FF4444"/>
                                                        <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="#FFFF4444"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                            <!-- Context menu egyszerűsítve -->
                            <Button.ContextMenu>
                                <ContextMenu x:Name="ExitContextMenu" HasDropShadow="False" Width="320" Opened="ExitContextMenu_Opened" Closed="ExitContextMenu_Closed">
                                    <ContextMenu.Template>
                                        <ControlTemplate TargetType="ContextMenu">
                                            <Border Background="#FF1A1C20" CornerRadius="12" BorderBrush="#FFFFA726" BorderThickness="2" MinWidth="320" Panel.ZIndex="1000">
                                                <Border.Triggers>
                                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                        <BeginStoryboard Storyboard="{StaticResource ExitMenuEntrance}"/>
                                                    </EventTrigger>
                                                </Border.Triggers>
                                                <StackPanel>
                                                    <Border Background="#331A1C20" Padding="16,12" CornerRadius="12,12,0,0">
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                            <TextBlock Text="&#xE7E8;" FontFamily="Segoe MDL2 Assets" Foreground="#FFFFA726" FontSize="14" Margin="0,3,8,0"/>
                                                            <TextBlock Text="Kilépés" Foreground="#FFFFA726" FontWeight="Bold" FontSize="14"/>
                                                        </StackPanel>
                                                    </Border>
                                                    <ItemsPresenter Margin="8"/>
                                                </StackPanel>
                                            </Border>
                                        </ControlTemplate>
                                    </ContextMenu.Template>
                                    <ContextMenu.Resources>
                                        <!-- Egyszerűsített menu item stílusok -->
                                        <Style x:Key="BaseMenuItemStyle" TargetType="MenuItem">
                                            <Setter Property="Padding" Value="16,14"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="MenuItem">
                                                        <Border x:Name="bd" Background="#111A1C20" CornerRadius="8" Padding="16,14" Margin="8,4" MinWidth="280"
                                                                BorderBrush="Transparent" BorderThickness="2">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock x:Name="iconText" Text="{TemplateBinding Tag}" FontFamily="Segoe MDL2 Assets" 
                                                                           Foreground="#FFFFA726" FontSize="18" VerticalAlignment="Center" Margin="0,0,16,0"/>
                                                                <StackPanel Grid.Column="1">
                                                                    <TextBlock Text="{TemplateBinding Header}" Foreground="White" FontWeight="Bold" FontSize="16"/>
                                                                    <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ToolTip}" 
                                                                               Foreground="#B3FFFFFF" FontSize="12" Margin="0,2,0,0"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="bd" Property="Background" Value="#22FFA726"/>
                                                                <Setter TargetName="bd" Property="BorderBrush" Value="#FFFFA726"/>
                                                                <Setter TargetName="iconText" Property="Foreground" Value="#FFFFFF"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>

                                        <Style x:Key="DangerMenuItemStyle" BasedOn="{StaticResource BaseMenuItemStyle}" TargetType="MenuItem">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="MenuItem">
                                                        <Border x:Name="bd" Background="#19D32F2F" CornerRadius="8" Padding="16,14" Margin="8,4" MinWidth="280"
                                                                BorderBrush="Transparent" BorderThickness="2">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock x:Name="iconText" Text="{TemplateBinding Tag}" FontFamily="Segoe MDL2 Assets" 
                                                                           Foreground="#FFD32F2F" FontSize="18" VerticalAlignment="Center" Margin="0,0,16,0"/>
                                                                <StackPanel Grid.Column="1">
                                                                    <TextBlock Text="{TemplateBinding Header}" Foreground="White" FontWeight="Bold" FontSize="16"/>
                                                                    <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ToolTip}" 
                                                                               Foreground="#E6FFFFFF" FontSize="12" Margin="0,2,0,0"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="bd" Property="Background" Value="#22D32F2F"/>
                                                                <Setter TargetName="bd" Property="BorderBrush" Value="#FFD32F2F"/>
                                                                <Setter TargetName="iconText" Property="Foreground" Value="#FFFFFF"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ContextMenu.Resources>

                                    <MenuItem Style="{StaticResource BaseMenuItemStyle}"
                                              Header="Kilépés"
                                              ToolTip="Program bezárása bejelentkezve maradással"
                                              Tag="&#xE711;" Click="ExitOnlyMenuItem_Click"/>

                                    <MenuItem Style="{StaticResource DangerMenuItemStyle}"
                                              Header="Kijelentkezés"
                                              ToolTip="Adatok törlése és visszatérés a bejelentkezési képernyőhöz"
                                              Tag="&#xE7E8;" Click="LogoutExitMenuItem_Click"/>
                                </ContextMenu>
                            </Button.ContextMenu>
                        </Button>
                    </StackPanel>
                </Grid>

                <Grid Grid.Row="1" Margin="0,0,0,0" Width="1196">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="420"/>
                    </Grid.ColumnDefinitions>

                    <!-- Módosított header vonal - csak a navigációs panelig tart -->
                    <Rectangle Height="2" VerticalAlignment="Top" Fill="#FFFFA726" Opacity="0.8" Grid.Column="1" Grid.ColumnSpan="2"/>
                    
                    <!-- Sötétítő réteg a navigációs panel helyén -->
                    <Rectangle Grid.Column="0" Height="2" VerticalAlignment="Top" Fill="#33000000" Opacity="1"/>

                    <!-- Navigációs panel -->
                    <Border x:Name="NavPanelContainer" Grid.Column="0" CornerRadius="0,0,0,17" Margin="0,2,0,0" Background="#33000000" Opacity="0"
                            BorderBrush="#FFFFA726" BorderThickness="0,0,2,0">
                        <Grid>
                            <StackPanel x:Name="NavButtonsPanel" VerticalAlignment="Stretch" Margin="0,2,0,0">
                                <StackPanel.Resources>
                                    <!-- Optimalizált nav button - glow effect egyszerűsítve -->
                                    <Style x:Key="NavButtonStyle" TargetType="Button">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="#FFFFA726"/>
                                        <Setter Property="FontSize" Value="32"/>
                                        <Setter Property="Margin" Value="0,32,0,30"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Height" Value="62"/>
                                        <Setter Property="Width" Value="37"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <ContentPresenter x:Name="contentPresenter" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="Tag" Value="Active">
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </StackPanel.Resources>
                                <Button x:Name="HomeNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE80F;" FontFamily="Segoe MDL2 Assets" ToolTip="Home" Click="HomeButton_Click"/>
                                <Button x:Name="StarNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE734;" FontFamily="Segoe MDL2 Assets" ToolTip="Star" Click="StarButton_Click"/>
                                <Button x:Name="ProfileNavButton" Style="{StaticResource NavButtonStyle}" Content="&#xE77B;" FontFamily="Segoe MDL2 Assets" ToolTip="Profile" Click="ProfileButton_Click"/>
                            </StackPanel>

                            <!-- Navigációs indikátor - nem ér hozzá a borderhez -->
                            <Rectangle x:Name="NavIndicator" Width="6" Fill="#FFFFA726" RadiusX="3" RadiusY="3" 
                                       HorizontalAlignment="Right" Margin="0,28,8,509">
                                <Rectangle.RenderTransform>
                                    <TranslateTransform x:Name="NavIndicatorTransform" Y="0"/>
                                </Rectangle.RenderTransform>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Fő tartalom grid -->
                    <Grid x:Name="MainContentGrid" Grid.Column="1" Opacity="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Action button egyszerűsítve -->
                        <Button x:Name="ActionButton" Cursor="Hand" Click="HandleActionButton_Click" HorizontalAlignment="Left" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5" Width="310" Height="310" Margin="324,0,0,0">
                            <Button.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform/>
                                    <SkewTransform AngleX="0.095"/>
                                    <RotateTransform/>
                                    <TranslateTransform X="0.248"/>
                                </TransformGroup>
                            </Button.RenderTransform>
                            <Button.Style>
                                <Style TargetType="{x:Type Button}">
                                    <Setter Property="Background" Value="Transparent" />
                                    <Setter Property="BorderBrush" Value="Transparent" />
                                    <Setter Property="Foreground" Value="White" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type Button}">
                                                <Grid>
                                                    <Border x:Name="OuterBorder" CornerRadius="45" BorderThickness="4" BorderBrush="#FFFFA726" Margin="-6" Background="#00000000"/>
                                                    <Border x:Name="InnerBorder" Width="300" Height="300" CornerRadius="37" BorderThickness="4" BorderBrush="#FFFFA726" Padding="32" Background="#00000000">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <EventTrigger RoutedEvent="UIElement.MouseEnter">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <ColorAnimation Storyboard.TargetName="OuterBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#22FFA726" Duration="0:0:0.15"/>
                                                                <ColorAnimation Storyboard.TargetName="InnerBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#22FFA726" Duration="0:0:0.15"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <EventTrigger RoutedEvent="UIElement.MouseLeave">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <ColorAnimation Storyboard.TargetName="OuterBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#00000000" Duration="0:0:0.15"/>
                                                                <ColorAnimation Storyboard.TargetName="InnerBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#00000000" Duration="0:0:0.15"/>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="InnerBorder" Property="Background" Value="#44FFA726"/>
                                                    </Trigger>
                                                    <Trigger Property="IsEnabled" Value="False">
                                                        <Setter TargetName="InnerBorder" Property="Opacity" Value="0.5"/>
                                                        <Setter TargetName="OuterBorder" Property="Opacity" Value="0.5"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                            <Viewbox>
                                <TextBlock x:Name="ButtonText" Text="LETOLTES" FontSize="48" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </Viewbox>
                        </Button>
                    </Grid>

                    <!-- Profil nézet -->
                    <Grid x:Name="ProfileViewGrid" Grid.Column="1" Grid.ColumnSpan="2" Visibility="Collapsed" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                        <StackPanel Width="600" HorizontalAlignment="Center">
                            <Border Background="#77000000" CornerRadius="20" Padding="30" Margin="0,0,0,30">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0" Width="120" Height="120" CornerRadius="60" 
                                            Background="#FFFFA726" Margin="0,0,30,0">
                                        <TextBlock Text="👤" FontSize="60" HorizontalAlignment="Center" 
                                                   VerticalAlignment="Center" Foreground="#FF1A1C20"/>
                                    </Border>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock x:Name="ProfileUsernameText" Text="Felhasználó" 
                                                   FontSize="32" FontWeight="Bold" Foreground="#FFFFA726" 
                                                   Margin="0,0,0,15"/>
                                        <TextBlock x:Name="ProfileRankText" Text="🔰 Kezdő" 
                                                   FontSize="18" FontWeight="SemiBold" Foreground="White"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Background="#77000000" CornerRadius="15" Padding="25">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="🏆" FontSize="40" HorizontalAlignment="Center" Margin="0,0,0,10" Foreground="#FFFFA726"/>
                                        <TextBlock Text="Legmagasabb pontszám" FontSize="16" FontWeight="SemiBold" 
                                                   Foreground="#FFFFA726" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                        <TextBlock x:Name="ProfileHighestScoreText" Text="0" FontSize="28" FontWeight="Bold" 
                                                   Foreground="White" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <Border Grid.Column="2" Background="#77000000" CornerRadius="15" Padding="25">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="🏅" FontSize="40" HorizontalAlignment="Center" Margin="0,0,0,10" Foreground="#FFFFA726"/>
                                        <TextBlock Text="Rangsor helyezés" FontSize="16" FontWeight="SemiBold" 
                                                   Foreground="#FFFFA726" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                        <TextBlock x:Name="ProfileUserRankText" Text="N/A" FontSize="28" FontWeight="Bold" 
                                                   Foreground="White" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Grid>

                    <!-- Leaderboard view -->
                    <Grid x:Name="LeaderboardViewGrid" Grid.Column="1" Grid.ColumnSpan="2" Visibility="Collapsed" Margin="40,25,20,0">
                        <StackPanel>
                            <TextBlock Text="TOP 15 JÁTÉKOS" Foreground="White" FontSize="22" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <Rectangle Height="1" Fill="#A7FFA726" Margin="0,10,0,20" HorizontalAlignment="Center" Width="350"/>

                            <Border Background="#66000000" CornerRadius="8" BorderBrush="#33CCCCCC" BorderThickness="0,0,0,1" Margin="0,0,40,10" Padding="12,0,12,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Helyezés" Foreground="#FFFFA726" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" Text="Felhasználónév" Foreground="#FFFFA726" FontWeight="Bold" FontSize="16"/>
                                    <TextBlock Grid.Column="2" Text="Pontszám" Foreground="#FFFFA726" FontWeight="Bold" FontSize="16" HorizontalAlignment="Right"/>
                                </Grid>
                            </Border>

                            <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500">
                                <ItemsControl x:Name="LeaderboardItemsControl">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#55000000" CornerRadius="8" Margin="0,0,40,8" Padding="12">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="80"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="150"/>
                                                    </Grid.ColumnDefinitions>

                                                    <TextBlock Grid.Column="0" Text="{Binding rank, StringFormat='#{0}'}" Foreground="White" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="1" Text="{Binding username}" Foreground="White" FontSize="16" VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="2" Text="{Binding highest_score}" Foreground="#FFFFA726" FontSize="18" FontWeight="SemiBold" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </StackPanel>
                    </Grid>

                    <!-- Hírek panel -->
                    <Border x:Name="NewsPanelBorder" Grid.Column="2" CornerRadius="12" Margin="0,25,0,155" Opacity="0">
                        <StackPanel HorizontalAlignment="Center" Margin="15,0,15,0">
                            <TextBlock Text="HÍREK ÉS FRISSÍTÉSEK" Foreground="White" FontSize="22" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <Rectangle Height="1" Fill="#A7FFA726" Margin="0,10,0,20" HorizontalAlignment="Center" Width="295"/>
                            <Grid Height="370">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <ScrollViewer x:Name="NewsScrollViewer" Grid.Row="1" VerticalScrollBarVisibility="Hidden" PreviewMouseWheel="NewsScrollViewer_PreviewMouseWheel" ScrollChanged="NewsScrollViewer_ScrollChanged">
                                    <ItemsControl x:Name="NewsItemsControl" HorizontalAlignment="Center">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#66000000" CornerRadius="8" Margin="0,0,0,15" Padding="8" Height="{StaticResource NewsItemHeight}">
                                                    <Grid VerticalAlignment="Center">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Rectangle Grid.Column="0" Width="3" Height="{StaticResource NewsBarHeight}" Fill="#FFFFA726" RadiusX="2" RadiusY="2" Margin="0,0,12,0" VerticalAlignment="Center"/>
                                                        <Grid Grid.Column="1" Width="279" Height="{StaticResource NewsBarHeight}">
                                                            <TextBlock Text="{Binding Title}" Foreground="White" FontWeight="Bold" FontSize="15" 
                                                                       TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Top"
                                                                       Margin="0,4,60,0" MaxHeight="48" TextTrimming="CharacterEllipsis"/>
                                                            <TextBlock Text="{Binding FormattedDate}" Foreground="#FFFFA726" FontSize="12" FontWeight="Bold" 
                                                                       HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                                                                       Margin="0,0,8,-10">
                                                                <TextBlock.RenderTransform>
                                                                    <TranslateTransform X="7" Y="0"/>
                                                                </TextBlock.RenderTransform>
                                                            </TextBlock>
                                                        </Grid>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>

                                <!-- Scroll indikátorok -->
                                <Grid x:Name="TopScrollIndicator" Grid.Row="0" Height="25" Opacity="0" IsHitTestVisible="False">
                                    <TextBlock Text="▲" FontSize="16" FontWeight="Bold" Foreground="#FFFFA726" 
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>

                                <Grid x:Name="BottomScrollIndicator" Grid.Row="2" Height="25" Opacity="0" IsHitTestVisible="False">
                                    <TextBlock Text="▼" FontSize="16" FontWeight="Bold" Foreground="#FFFFA726" 
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Notification border -->
                <Border x:Name="NotificationBorder" Grid.Row="0" Grid.RowSpan="2" Height="50" Opacity="0" Background="#55000000" BorderBrush="#FFFFA726" BorderThickness="1.5" CornerRadius="10" Margin="25,90,20,0" HorizontalAlignment="Center" VerticalAlignment="Top" Visibility="Collapsed">
                    <TextBlock x:Name="NotificationText" Foreground="White" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20,0"/>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>